(window.webpackJsonp=window.webpackJsonp||[]).push([["order-widget"],{"0oEL":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><path fill="none" stroke="currentColor" stroke-width="2" d="M17.09 6.5A7.5 7.5 0 1 0 11.5 19a7.481 7.481 0 0 0 5.59-2.5"/></svg>'},"1uKM":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="#FB8C00" d="M0 9a9 9 0 1 1 18 0A9 9 0 0 1 0 9z"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M9 4c-.79 0-1.38.7-1.25 1.48l.67 4.03a.59.59 0 0 0 1.16 0l.67-4.03A1.27 1.27 0 0 0 9 4zm0 8a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>'},"2n7d":function(e,t,s){e.exports={"css-value-calculator-width":"150px"}},"3nsW":function(e,t,s){e.exports={priceLabel:"priceLabel-pmTo_qjO",ask:"ask-pmTo_qjO",bid:"bid-pmTo_qjO",last:"last-pmTo_qjO"}},"48L3":function(e,t,s){e.exports={menuBox:"menuBox-2VgDDAqn"}},"5o6O":function(e,t,s){e.exports={tabs:"tabs-3I2ohC86",tab:"tab-3I2ohC86",noBorder:"noBorder-3I2ohC86",disabled:"disabled-3I2ohC86",active:"active-3I2ohC86",defaultCursor:"defaultCursor-3I2ohC86",slider:"slider-3I2ohC86",content:"content-3I2ohC86"}},"8v5A":function(e,t,s){e.exports={wrapper:"wrapper-3sxMiT7m",dateTimeWrapper:"dateTimeWrapper-3sxMiT7m",timeInput:"timeInput-3sxMiT7m",buttonWrapper:"buttonWrapper-3sxMiT7m",button:"button-3sxMiT7m"}},"9E2J":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><path fill="currentColor" stroke="none" d="M2 10h18v2H2z"/></svg>'},BJPy:function(e,t,s){e.exports={orderWidget:"orderWidget-2KpX3bio",header:"header-2KpX3bio",side:"side-2KpX3bio",doneButton:"doneButton-2KpX3bio",customField:"customField-2KpX3bio",duration:"duration-2KpX3bio",centerBlock:"centerBlock-2KpX3bio",customFieldsWrapper:"customFieldsWrapper-2KpX3bio",notice:"notice-2KpX3bio",resizeHandler:"resizeHandler-2KpX3bio",orderTicket:"orderTicket-2KpX3bio",orderInfoAndSeparator:"orderInfoAndSeparator-2KpX3bio",separator:"separator-2KpX3bio",topWrapper:"topWrapper-2KpX3bio","brackets-wrapper":"brackets-wrapper-2KpX3bio",brackets:"brackets-2KpX3bio",quantityBracketsWrapper:"quantityBracketsWrapper-2KpX3bio",title:"title-2KpX3bio",button:"button-2KpX3bio"}},EVs3:function(e,t,s){e.exports={controlGroup:"controlGroup-aAjeEunF",relativePriceControl:"relativePriceControl-aAjeEunF",title:"title-aAjeEunF",controlContainer:"controlContainer-aAjeEunF",control:"control-aAjeEunF",input:"input-aAjeEunF",wait:"wait-aAjeEunF"}},Gg3R:function(e,t,s){e.exports={absolutePriceDropdownItem:"absolutePriceDropdownItem-2wipmFIV",price:"price-2wipmFIV",labelsGroup:"labelsGroup-2wipmFIV"}},H3n3:function(e,t,s){e.exports={dialog:"dialog-3CCITr5n",dialogBody:"dialogBody-3CCITr5n"}},IkHa:function(e,t,s){"use strict";s.r(t);var r=s("q1tI"),o=s.n(r),i=s("i8i4"),n=s("YFKU"),a=s("TSYQ"),l=s("Eyy1"),c=s("Vdly"),p=s("Kxc7"),d=s("txPx"),u=s("qFKp"),h=s("8wgr"),m=s("oykh"),b=s("en3B"),v=s("pKbH")
;const _=window.t("Sell"),g=window.t("Buy"),f=window.t("No Data");class C extends r.PureComponent{constructor(e){super(e),this._isLongValue=!1,this._maxDigitsNumber=7,this._createClickHandler=e=>()=>this.props.onSideChanged(e),this._isLongValue=Boolean(this.props.quotes.spread&&this.props.quotes.spread.toString().length>this._maxDigitsNumber||this.props.quotes.ask&&this.props.quotes.ask.toString().length>this._maxDigitsNumber)}render(){const e=a(v.sideControl,[b.h.Editing,b.h.Preview].includes(this.props.status)&&v.disable,this.props.status===b.h.Wait&&v.wait),t=a(v.section,v.sell,this.props.status!==b.h.Wait&&-1===this.props.side&&v.active),s=a(v.section,v.buy,this.props.status!==b.h.Wait&&1===this.props.side&&v.active),o=this.props.quotes.bid?r.createElement("div",null,this.props.quotes.bid):r.createElement("div",{className:v.valueNoData},f),i=this.props.quotes.ask?r.createElement("div",null,this.props.quotes.ask):r.createElement("div",{className:v.valueNoData},f);return r.createElement("div",{className:e},r.createElement("div",{className:t,onClick:this._createClickHandler(-1),tabIndex:-1},r.createElement("div",{className:v.title},r.createElement("span",{className:this.props.currencyForCrypto&&v.typeSide},_),this.props.currencyForCrypto&&r.createElement("span",null,this.props.currencyForCrypto)),r.createElement("div",{className:v.value},o)),r.createElement("div",{className:s,onClick:this._createClickHandler(1),tabIndex:-1},r.createElement("div",{className:v.title},r.createElement("span",{className:this.props.currencyForCrypto&&v.typeSide},g),this.props.currencyForCrypto&&r.createElement("span",{className:v.typeSide},this.props.currencyForCrypto)),r.createElement("div",{className:v.value},i)),this.props.quotes.spread&&r.createElement("div",{className:a(v.spread,this._isLongValue&&v.isLongValue)},this.props.quotes.spread))}}class w extends r.PureComponent{constructor(e){super(e),this._onSideChanged=e=>{this.props.disabled||(this.props.model.side.setValue(e),this.props.model.onControlFocused.fire())},this._callback=()=>this.forceUpdate(),this._statusCallback=e=>{e!==b.h.Preview&&this.forceUpdate()}}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel(this.props.model)}render(){const e=this.props.model;return r.createElement(C,{quotes:e.quotes.value(),side:e.side.value(),status:e.status.value(),onSideChanged:this._onSideChanged,currencyForCrypto:e.baseCurrency})}_subscribeToModel(e){e.quotes.subscribe(this._callback),e.side.subscribe(this._callback),e.status.subscribe(this._statusCallback)}_unsubscribeFromModel(e){e.quotes.unsubscribe(this._callback),e.side.unsubscribe(this._callback),e.status.unsubscribe(this._statusCallback)}}var k=s("mwqF"),E=s("/qCs"),y=s("gla1"),S=s("Iivm"),P=s("L2Pi"),O=s("1uKM");const M={cancel:window.t("Cancel"),sendOrder:window.t("Send Order")};function N(e){const t=Object(r.useRef)(null),s=Object(y.a)();Object(r.useEffect)(()=>{const r=()=>s();return Object(l.ensureNotNull)(t.current).focus(),e.loading.subscribe(r),
e.model.infoTableQuotesData().subscribe(r),()=>{e.loading.unsubscribe(r),e.model.infoTableQuotesData().unsubscribe(r)}});const i=o.a.createElement(E.a,{rows:e.model.infoTableQuotesData().value().rows,header:e.model.infoTableQuotesData().value().header}),n=o.a.createElement(E.a,{rows:e.model.infoTableOrderData().rows,header:e.model.infoTableOrderData().header}),a=e.model.infoTableCustomData().map((e,t)=>o.a.createElement(E.a,{key:"custom-"+t,rows:e.rows,header:e.header})),c=0!==e.model.warnings.length&&o.a.createElement("div",{className:P.warning},o.a.createElement(S.a,{className:P.warning__icon,icon:O}),o.a.createElement("div",null,e.model.warnings.map(e=>o.a.createElement("div",{key:e},e)))),p=0!==e.model.errors.length&&o.a.createElement("div",{className:P.error},e.model.errors.map(e=>o.a.createElement("div",{key:e},e)));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:P.content},i,o.a.createElement("div",{className:P.separator}),n,o.a.createElement("div",{className:P.separator}),a,p,c),o.a.createElement("div",{className:P.controls},o.a.createElement("div",{className:P.button},o.a.createElement(k.a,{useFullWidth:!0,size:"l",intent:-1===e.side?"danger":"primary",onClick:e.model.onPlaceClick,reference:t,disabled:e.loading.value()},M.sendOrder)),o.a.createElement("div",{className:P.button},o.a.createElement(k.a,{useFullWidth:!0,size:"l",intent:"default",appearance:"stroke",onClick:e.model.onCancelClick},M.cancel))))}var T=s("K3s3");class D extends r.PureComponent{constructor(){super(...arguments),this._createClickHandler=e=>()=>{this.props.disabled||this.props.onSelect(e)}}render(){const e=this._generateTabs();return r.createElement("div",null,r.createElement(T.c,null,e),r.createElement("div",null,this.props.children[this.props.activeTab||0]))}_generateTabs(){const{activeTab:e,disabled:t}=this.props;return r.Children.map(this.props.children,(s,o)=>{const i=void 0!==s.props.id?s.props.id:o;return r.createElement(T.b,{value:i,isActive:e===i,isDisabled:t,shouldUseDefaultCursor:!!this.props.shouldUseDefaultCursor,noBorder:!!this.props.noBorder,onClick:this._createClickHandler(i)},s.props.title)})}}function I(e){return r.createElement("div",null,e.children)}var x=s("TZdo");const B=window.t("Market"),F=window.t("Limit"),H=window.t("Stop"),R=window.t("Stop Limit");class V extends r.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this.context.resizerWidth&&this.context.resizerWidth.subscribe(this._callback)}componentWillUnmount(){this.context.resizerWidth&&this.context.resizerWidth.unsubscribe(this._callback)}render(){const e=[];return this.props.supportMarketOrders&&e.push(r.createElement(I,{key:2,title:B,id:2})),this.props.supportLimitOrders&&e.push(r.createElement(I,{key:1,title:F,id:1})),this.props.supportStopOrders&&e.push(r.createElement(I,{key:3,title:H,id:3})),this.props.supportStopLimitOrders&&e.push(r.createElement(I,{key:4,title:R,id:4})),r.createElement(r.Fragment,null,r.createElement("div",{className:x.tabsContainer,tabIndex:-1
},r.createElement(D,{activeTab:this.props.activeTab,shouldUseDefaultCursor:!0,onSelect:this.props.onSelect,disabled:this.props.disabled,noBorder:!0},e)),r.createElement("div",{className:x.separator}))}}V.contextType=b.f;var A=s("k/ZQ"),j=s("wwkJ"),W=s("xx2B"),L=s("RgaO"),z=s("h6kW"),q=s("8+VR"),K=s("X6/E"),U=s("V1pJ"),J=s("2n7d");const G=parseInt(J["css-value-calculator-width"]);class Q extends r.PureComponent{constructor(e){super(e),this._control=null,this._input=null,this._calc=null,this._getCurrentValue=()=>this.props.value||0,this._getDropdownPosition=()=>{if(null===this._control)return{x:0,y:0};const e=this._control.getBoundingClientRect();return{x:e.left+e.width-G,y:e.bottom+2}},this._onFocus=e=>{const t=Object(l.ensureNotNull)(this._calc);!q.mobiletouch&&t.contains(e.target)&&Object(l.ensureNotNull)(this._input).focus()},this._setRef=e=>{this._control=e},this._setCalcRef=e=>{this._calc=e},this._setInputRef=e=>{this._input=e},this._onKeyDown=e=>{!this.state.isOpened||13!==e.keyCode&&27!==e.keyCode||(e.stopPropagation(),this.setState({isOpened:!1})),Object.values(b.d).includes(e.keyCode)||Object.values(b.e).includes(e.keyCode)||this.setState({isOpened:!1}),this.props.onKeyDown&&this.props.onKeyDown(e)},this._onClickOutside=e=>{this._calc&&!this._calc.contains(e.target)&&this.setState({isOpened:!1})},this._updateValue=e=>{this.props.onValueChange(e)},this._toggle=()=>{this.setState(e=>({isOpened:!e.isOpened}))},this._setInputFocus=e=>{null!==e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length))},this.state={isOpened:!1}}componentDidMount(){5===this.props.focus&&this._setInputFocus(this._input)}render(){const{min:e,step:t,uiStep:s,error:o,errorMessage:i,className:n,errorHandler:l,highlight:c,highlightRemoveRoundBorder:p,intent:d,fontSizeStyle:u,...h}=this.props,m=r.createElement(S.a,{icon:K,className:a(U.calculatorIcon,this.state.isOpened&&U.isOpened),onClick:this._toggle});return r.createElement(L.a,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onClickOutside},a=>r.createElement("span",{ref:a},r.createElement(W.a,{value:this.props.value||0,alwaysUpdateValueFromProps:this.state.isOpened,formatter:this.props.formatter,className:n,containerReference:this._setRef,inputReference:this._setInputRef,button:m,onValueChange:this._updateValue,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this._onKeyDown,error:o,errorMessage:i,errorHandler:l,step:t,uiStep:s,controlDecKeyCodes:this.state.isOpened?[b.d.Minus,b.d.NumMinus,b.d.FirefoxMinus]:void 0,controlIncKeyCodes:this.state.isOpened?[b.e.Plus,b.e.NumPlus,b.e.FirefoxPlus]:void 0,highlight:c,highlightRemoveRoundBorder:p,intent:d,fontSizeStyle:u}),this.state.isOpened&&r.createElement(z.a,{...h,min:e,step:t,uiStep:s,valueGetter:this._getCurrentValue,position:this._getDropdownPosition(),targetEl:this._control,calcReference:this._setCalcRef,onClose:this._toggle,onFocus:this._onFocus,trackEventTarget:"Order Ticket"})))}}class X extends r.PureComponent{constructor(e){super(e),this._defaultMax=9e15,this._onFocus=()=>{
this.props.onFocus&&this.props.onFocus(this.props.type)},this._onValueChange=e=>{this.props.control.value.setValue(e),this.props.control.onModifiedCallback()},this._callback=()=>this.forceUpdate()}componentDidMount(){this.props.control.value.subscribe(this._callback)}componentWillUnmount(){this.props.control.value.unsubscribe(this._callback)}render(){const{control:e,focus:t,min:s,max:o,step:i,uiStep:n,type:l,error:c,errorMessage:p,errorHandler:d,label:u,formatter:h,className:m,status:v,trackEvent:_,highlight:g,highlightRemoveRoundBorder:f,intent:C,fontSizeStyle:w}=this.props,k={value:e.value.value()||0,step:i,uiStep:n,className:a(U.input,v===b.h.Wait&&U.wait),error:c,errorMessage:p,errorHandler:d,onFocus:this._onFocus,formatter:h,onValueChange:this._onValueChange,calculatorUsedStat:()=>e.calculatorUsedStat(),highlight:g,highlightRemoveRoundBorder:f,intent:C,fontSizeStyle:w},E=0===l?r.createElement(Q,{...k,focus:t,min:s||i,max:o||this._defaultMax,trackEvent:_}):r.createElement(W.a,{...k,step:.01});return r.createElement("div",{className:a(m,U.control)},E,u&&r.createElement("div",{className:U.label}," ",u," "))}}var Y=s("NbG7");const Z=window.t("Risk"),$=window.t("Units"),ee=window.t("Lots");class te extends r.PureComponent{constructor(e){super(e),this._onFocus=e=>{this.props.model.focusedControl.setValue(e),this.props.model.onControlFocused.fire()},this._errorHandler=e=>{this.props.model.setControlError(e)},this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel(this.props.model)}render(){var e;const t=this.context.value,{model:s,symbolHasLotSize:o,trackEvent:i,focus:n}=this.props,l=s.error.value(),c={errorHandler:this._errorHandler,error:l,status:s.status.value(),onFocus:this._onFocus,trackEvent:i,fontSizeStyle:"medium"},p=Boolean(l&&l.res),d=l&&l.msg,u=s.showRiskControls&&s.isRiskAvailable.value()&&(t.showPercentRiskInQty||t.showCurrencyRiskInQty);return r.createElement(r.Fragment,null,r.createElement(j.a.Provider,{value:this._getGroupContextValue(!0,!u)},r.createElement(X,{...c,...this._generateHighlightProps(0),control:s.quantity,min:s.qty.min,max:s.qty.max,step:s.qty.step,uiStep:s.qty.uiStep,type:0,formatter:s.formatter,label:null!==(e=s.units)&&void 0!==e?e:o?ee:$,className:a(!u&&U.single,U.units),focus:n,error:p&&this._isSelectedControl(0),errorMessage:d})),u&&r.createElement("div",{className:U.risk},t.showCurrencyRiskInQty&&r.createElement(j.a.Provider,{value:this._getGroupContextValue(!1,!t.showPercentRiskInQty)},r.createElement(X,{...c,...this._generateHighlightProps(1),control:s.riskInCurrency,step:s.riskStep,type:1,formatter:s.riskInCurrencyFormatter,label:s.currency+" "+Z,error:p&&this._isSelectedControl(1),errorMessage:d})),t.showPercentRiskInQty&&r.createElement(j.a.Provider,{value:this._getGroupContextValue(!1,!0)},r.createElement(X,{...c,...this._generateHighlightProps(2),control:s.riskInPercent,step:s.riskStep,type:2,formatter:s.riskInPercentFormatter,label:"% "+Z,error:p&&this._isSelectedControl(2),
errorMessage:d}))))}_generateHighlightProps(e){const t=this.props.model.error.value(),s=this.props.model.isRiskAvailable.value()?this._isSelectedControl(e):void 0;return{highlight:(this.context.value.showCurrencyRiskInQty||this.context.value.showPercentRiskInQty)&&(0===e?s:this._isSelectedControl(e)),highlightRemoveRoundBorder:0,intent:Boolean(t&&t.res)&&this._isSelectedControl(e)?"danger":void 0}}_isSelectedControl(e){return this.props.model.status.value()!==b.h.Wait&&this.props.model.focusedControl.value()===e}_subscribeToModel(e){e.focusedControl.subscribe(this._callback),e.isRiskAvailable.subscribe(this._callback),e.error.subscribe(this._callback)}_unsubscribeFromModel(e){e.focusedControl.unsubscribe(this._callback),e.isRiskAvailable.unsubscribe(this._callback),e.error.unsubscribe(this._callback)}_getGroupContextValue(e,t){return{isGrouped:!0,disablePositionAdjustment:!0,cellState:{isTop:!0,isRight:t,isBottom:!0,isLeft:e}}}}te.contextType=Y.a;var se=s("nc0P"),re=s("QAe6"),oe=s("vqb8"),ie=s("9dlw"),ne=s("/3z9"),ae=s("N5tr"),le=s("ZLno"),ce=s("eGEP");const pe=[1,5,10,25,50,75,100];function de(e){const t=Object(r.useRef)(null),[s,i]=Object(re.a)(e.value),[n,c]=Object(re.a)(e.focusedControl),[p,d]=Object(r.useState)(!1),[u,h]=Object(r.useState)(0),m=Object(oe.a)({watchedValue:e.error}),v=Object(oe.a)({watchedValue:e.balance}),_=Object(oe.a)({watchedValue:e.side}),g=Boolean(m&&m.res),f=m&&m.msg,C=Object(r.useRef)(null);return Object(r.useEffect)(()=>{var t;5===e.initialFocus&&null!==(t=C.current)&&(t.focus(),t.setSelectionRange(t.value.length,t.value.length))},[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{...function(e){const t={highlightRemoveRoundBorder:0};E(e)&&(t.highlight=!0);Boolean(m&&m.res)&&E(e)&&(t.intent="danger");return t}(e.control),value:s,onBlur:e.forceRoundByStep?function(){if(null!==s){const t=new se.Big(s),r=t.mod(e.step);if(!r.eq(0)){w(Number(t.minus(r)))}}}:void 0,onValueChange:w,step:e.step,formatter:e.formatter,errorMessage:f,errorHandler:e.setControlError,error:g&&E(e.control),inputReference:function(e){C.current=e},innerLabel:p?void 0:o.a.createElement("span",{className:ce.label},e.label),onFocus:()=>{return t=e.control,c(t),void e.onControlFocused.fire();var t},className:a(ce.input,e.status.value()===b.h.Wait&&ce.wait),button:k()?o.a.createElement(le.b,{isDropped:p,onClick:function(){d(!p)}}):o.a.createElement(o.a.Fragment,null),containerReference:function(e){t.current=e},alwaysUpdateValueFromProps:e.forceRoundByStep,fontSizeStyle:e.fontSizeStyle}),k()&&null!==v&&o.a.createElement(ie.a,{position:function(){const e=Object(l.ensureNotNull)(t.current).getBoundingClientRect();return h(e.width),{x:e.left,y:e.top+e.height+1}},onClose:y,isOpened:p,doNotCloseOn:t.current,onKeyDown:function(e){switch(Object(ne.hashFromEvent)(e)){case 27:p&&(e.preventDefault(),y())}},minWidth:u},pe.map(t=>{const s=function(e){const t=new se.Big(Object(l.ensureNotNull)(v).available);return Number(t.mul(.01).mul(e))}(t),r=o.a.createElement(o.a.Fragment,null,t+"%  ",o.a.createElement("span",{
className:ce.value},"("+e.formatter.format(s)+" "+e.label+")"));return o.a.createElement(ae.b,{key:t.toString(),className:ce.popupMenuItem,label:r,onClick:()=>i(s)})})));function w(t){i(t),e.onModifiedCallback()}function k(){return null!==v&&v.available>0&&(-1===_?3===e.control:4===e.control)}function E(t){return e.status.value()!==b.h.Wait&&n===t}function y(){d(!1),Object(l.ensureNotNull)(t.current).focus()}}var ue=s("4WSP");function he(e){const{model:t,className:s}=e,r={side:t.side,status:t.status,formatter:t.formatter,error:t.error,focusedControl:t.focusedControl,onControlFocused:t.onControlFocused,setControlError:t.setControlError,step:t.info.qty.step,fontSizeStyle:"medium"};return o.a.createElement(ue.a,{cols:1,rows:2,className:a(s,ce.wrapper)},o.a.createElement(de,{...r,value:t.quantity.value,onModifiedCallback:t.quantity.onModifiedCallback,label:t.info.baseCurrency,control:3,balance:t.baseCurrencyCryptoBalance,initialFocus:e.focus,forceRoundByStep:!0}),o.a.createElement(de,{...r,value:t.quoteCurrencyQuantity.value,onModifiedCallback:t.quoteCurrencyQuantity.onModifiedCallback,label:t.info.quoteCurrency,control:4,balance:t.quoteCurrencyCryptoBalance}))}var me=s("WUqb"),be=s("CSQ5"),ve=s("3nsW");function _e(e){const t=a(ve.priceLabel,ve[e.modifier.toLowerCase()]);return r.createElement("span",{className:a(t)},e.modifier)}var ge=s("Gg3R");function fe(e){const t=e.price===e.ask,s=e.price===e.bid,o=e.price===e.last,i=(t||s)&&e.ask===e.bid;let n,a;return e.displayPriceLabel&&(i&&1===e.side?n=r.createElement(_e,{modifier:"Ask"}):i&&-1===e.side?n=r.createElement(_e,{modifier:"Bid"}):t?n=r.createElement(_e,{modifier:"Ask"}):s&&(n=r.createElement(_e,{modifier:"Bid"})),a=r.createElement("div",{className:ge.labelsGroup},n,o&&r.createElement(_e,{modifier:"Last"}))),r.createElement("div",{className:ge.absolutePriceDropdownItem},r.createElement("div",{className:ge.price},e.price),a)}var Ce=s("zcN6"),we=s("R4+T"),ke=s("VVyh"),Ee=s("tTUf");const ye=Object(me.b)(Ce.a),Se=window.t("Absolute",{context:"price"}),Pe=window.t("Price format is invalid.");class Oe extends r.PureComponent{constructor(e){super(e),this._priceControl=null,this._priceInput=null,this._dropdown=null,this._setDropdownRef=e=>{this._dropdown=e},this._setInitialFocus=()=>{!q.mobiletouch&&this._priceInput&&(this.props.priceType===b.k.Limit&&1===this.props.focus||this.props.priceType===b.k.Stop&&2===this.props.focus)&&(this._priceInput.setSelectionRange(this.state.displayPrice.length,this.state.displayPrice.length),this._priceInput.focus())},this._onFocus=e=>{if(this.props.onControlFocused&&this.props.onControlFocused(0),this.props.errorHandler){const e=this.state.priceFormatter.parse(this.state.displayPrice);this.props.errorHandler(!e.res)}this.props.onFocus&&this.props.onFocus(e)},this._onOutsideClick=e=>{if(null!==this._priceControl&&!this._priceControl.contains(e.target)){const e=this.state.priceFormatter.parse(this.state.displayPrice);let t=this.props.displayPrice
;t=e.res?this.state.priceFormatter.format(e.value>=0?e.value:Math.abs(e.value)):this.state.prices[Object(ke.c)()],this.setState({displayPrice:t},()=>{this._onPriceSelected(t)}),this.props.errorHandler&&this.props.errorHandler(!1)}this.state.isOpened&&this._dropdown&&!this._dropdown.contains(e.target)&&this._closeDropdown()},this._onInputChange=e=>{const t=e.currentTarget.value,s=this.state.priceFormatter.parse(t);this._onModifiedCallback(),this.props.errorHandler&&this.props.errorHandler(!Boolean(s.res)),this._onPriceSelected(t)},this._onTouchStart=e=>{e.stopPropagation(),this._swipeState.y=e.touches[0].clientY},this._onTouchMove=e=>{if(e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length&&null!==this._swipeState.y){const t=e.changedTouches[0].clientY-this._swipeState.y;if(Math.abs(t)<10)return;this._swipeState.direction=t>0?"up":"down","up"===this._swipeState.direction?this._prependPriceOnTouchMove():"down"===this._swipeState.direction&&this._appendPriceOnTouchMove()}},this._onTouchEnd=e=>{e.stopPropagation(),this._resetSwipeState()},this._onDropdownWheelNoPassiv=e=>{e.preventDefault(),e.stopPropagation(),e.deltaY<0?this._prependPriceOnWheel():this._appendPriceOnWheel()},this._onInputMouseWheel=e=>{e.preventDefault(),e.stopPropagation(),this._onModifiedCallback(),this._scrollPriceOnWheel(e.deltaY<0?1:-1)},this._onSelect=(e,t)=>{const s=this.state.priceFormatter.parse(t.text);this.props.errorHandler&&this.props.errorHandler(!s.res),this.setState({highlight:!0,displayPrice:t.text,selected:e,isPriceSelectedByWheelOrByDropdown:!0},()=>{this._onModifiedCallback(),this._closeDropdown(),this._onPriceSelected(t.text),!q.mobiletouch&&this._priceInput&&this._priceInput.focus()})},this._onNavigate=(e,t)=>{const s=this.state.command&&"prev"===this.state.command.name,r=this.state.command&&"next"===this.state.command.name;s?this._prependPriceOnNavigate():r&&this._appendPriceOnNavigate()},this._onMouseOver=e=>{this.setState({mouseOver:!0})},this._onMouseOut=e=>{this.setState({mouseOver:!1})},this._onOpenBtnClick=e=>{e.stopPropagation(),this.state.isOpened?this._closeDropdown():(this._openDropdown(),!q.mobiletouch&&this._priceInput&&(this._priceInput.setSelectionRange(this.state.displayPrice.length,this.state.displayPrice.length),this._priceInput.focus()),this.props.onControlFocused&&this.props.onControlFocused(0))},this._setPriceInput=e=>{this._priceInput=e},this._setPriceControl=e=>{this._priceControl=e},this._scrollPriceOnArrowUp=e=>{e.preventDefault(),this._onModifiedCallback(),this._prependPriceOnNavigate()},this._scrollPriceOnArrowDown=e=>{e.preventDefault(),this._onModifiedCallback(),this._appendPriceOnNavigate()},this._selectPrev=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"prev"}})},this._selectNext=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"next"}})},this._openDropdown=()=>{this.setState({highlight:!0,isOpened:!0,keyboardEventHandlers:this._getKeyboardEventHandlers("open")})},this._closeDropdownWithStopPropagation=e=>{
e&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()),this._closeDropdown()},this._closeDropdown=()=>{const e={isOpened:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")};if(this.props.error||-1!==this.state.prices.indexOf(this.state.displayPrice)&&this.state.selected===Math.floor(this.state.prices.length/2))this.setState(e);else{const t=this.state.priceFormatter.parse(this.state.displayPrice),s=t.res?Object(ke.a)(t.value,this.props.step,this.state.priceFormatter,Object(ke.c)()):this.state.prices;this.setState(t=>({...e,prices:s,selected:s.indexOf(this.state.displayPrice)}))}};const t=Object(ke.a)(Object(ke.d)(e.displayPrice,e.priceFormatter),e.step,e.priceFormatter,Object(ke.c)());this.state={displayPrice:e.displayPrice,prices:t,selected:t.indexOf(e.displayPrice),highlight:this.props.highlight,isOpened:!1,mouseOver:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close"),priceFormatter:e.priceFormatter,step:e.step,isPriceSelectedByWheelOrByDropdown:!1},this._resetSwipeState()}componentDidMount(){this._setInitialFocus()}render(){const e=a(Ee.absolutePriceControl,this.props.className),t=r.createElement("span",{className:Ee.priceLabel},Se),s=a(Ee.openIcon,this.state.isOpened&&Ee.opened,this.props.status===b.h.Wait&&Ee.wait),o=r.createElement("div",{className:Ee.openButton,onClick:this._onOpenBtnClick},r.createElement("div",{className:Ee.iconWrapper},r.createElement(S.a,{className:s,icon:we})));return r.createElement(L.a,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},s=>r.createElement("span",{className:e,ref:s},r.createElement(ye,{className:this.props.inputClassName,containerReference:this._setPriceControl,inputReference:this._setPriceInput,keyboardEventHandlers:this.state.keyboardEventHandlers,value:this.state.displayPrice,warning:this.props.warning,error:this.props.error,errorMessage:this.props.errorMessage||Pe,onChange:this._onInputChange,onFocus:this._onFocus,onBlur:this.props.onBlur,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,onWheelNoPassive:this._onInputMouseWheel,highlight:this.state.highlight,highlightRemoveRoundBorder:this.props.highlightRemoveRoundBorder,fontSizeStyle:this.props.fontSizeStyle},o),t,r.createElement(be.a,{anchor:"bottom",root:"document",reference:this._setDropdownRef,className:Ee.list,command:this.state.command,isOpened:this.state.isOpened,items:this._makeListItems(),itemsClassName:Ee.item,width:this._getDropdownWidth(),selected:this.state.selected,selectedClassName:Ee.selected,target:null!==this._priceControl?this._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!1,shouldScrollIfNotVisible:!1,onSelect:this._onSelect,onNavigate:this._onNavigate,onDropdownTouchStart:this._onTouchStart,onDropdownTouchMove:this._onTouchMove,onDropdownTouchEnd:this._onTouchEnd,onDropdownWheelNoPassive:this._onDropdownWheelNoPassiv})))}static getDerivedStateFromProps(e,t){if(e.displayPrice!==t.displayPrice||e.highlight!==t.highlight||e.priceFormatter!==t.priceFormatter||e.step!==t.step){
const s=e.priceFormatter.parse(e.displayPrice),r=s.res?Object(ke.a)(s.value,e.step,e.priceFormatter,Object(ke.c)()):t.prices,o=e.priceFormatter.format(Object(ke.d)(e.displayPrice,e.priceFormatter)),i={...t,displayPrice:e.displayPrice,priceFormatter:e.priceFormatter,step:e.step,isPriceSelectedByWheelOrByDropdown:!1,highlight:e.highlight};return e.error||(i.selected=r.indexOf(o),i.prices=r),i}return null}_onPriceSelected(e){"function"==typeof this.props.onPriceSelected&&this.props.onPriceSelected(e)}_resetSwipeState(){this._swipeState={direction:null,y:null}}_getKeyboardEventHandlers(e){return"close"===e?{[me.a.UpArrow]:this._scrollPriceOnArrowUp,[me.a.DownArrow]:this._scrollPriceOnArrowDown}:{[me.a.Enter]:this._closeDropdownWithStopPropagation,[me.a.Escape]:this._closeDropdownWithStopPropagation,[me.a.UpArrow]:this._selectPrev,[me.a.DownArrow]:this._selectNext}}_makeListItems(e=!0){return this.state.prices.map(t=>({text:t,elem:r.createElement(fe,{price:t,ask:this.props.priceFormatter.format(this.props.ask),bid:this.props.priceFormatter.format(this.props.bid),last:this.props.priceFormatter.format(this.props.last),side:this.props.side,displayPriceLabel:e})}))}_prependPriceOnWheel(){const e=this.state.priceFormatter.format(Object(ke.d)(this.state.prices[0],this.state.priceFormatter)+1*this.props.step);this.setState(t=>({prices:[e].concat(t.prices.slice(0,-1)),selected:0===t.selected?1:t.selected+1}))}_appendPriceOnWheel(){const e=this.state.prices.length-1,t=this.state.priceFormatter.format(Object(ke.d)(this.state.prices[e],this.state.priceFormatter)+-1*this.props.step);this.setState(s=>({prices:s.prices.slice(1).concat(t),selected:s.selected===e?e-1:s.selected-1}))}_scrollPriceOnWheel(e){const t=this.state.priceFormatter.format(Object(ke.d)(this.state.prices[this.state.selected],this.state.priceFormatter)+e*this.props.step);this.setState({displayPrice:t},()=>{1===e?this._prependPriceOnNavigate():this._appendPriceOnNavigate()})}_prependPriceOnNavigate(){const e=[this.state.priceFormatter.format(Object(ke.d)(this.state.prices[0],this.state.priceFormatter)+1*this.props.step)].concat(this.state.prices.slice(0,-1)),t=this.state.prices.length-1;let s;s=this.state.selected<=0?0:this.state.selected>t?t:this.state.selected,this.setState({prices:e,displayPrice:e[s],selected:s,isPriceSelectedByWheelOrByDropdown:!0},()=>{this._onPriceSelected(e[s])})}_appendPriceOnNavigate(){const e=this.state.priceFormatter.format(Object(ke.d)(this.state.prices[this.state.prices.length-1],this.state.priceFormatter)+-1*this.props.step),t=this.state.prices.slice(1).concat(e),s=this.state.prices.length-1;let r;r=this.state.selected<=0?0:this.state.selected>s?s:this.state.selected,this.setState({prices:t,displayPrice:t[r],selected:r,isPriceSelectedByWheelOrByDropdown:!0},()=>{this._onPriceSelected(t[r])})}_prependPriceOnTouchMove(){const e=Object(ke.d)(this.state.prices[0],this.state.priceFormatter),t=Object(ke.b)(1,e,this.props.step,1,this.state.priceFormatter);this.setState(e=>({prices:t.concat(e.prices.slice(0,this.state.prices.length-1)),
selected:0===e.selected?1:e.selected+1}))}_appendPriceOnTouchMove(){const e=this.state.prices.length-1,t=Object(ke.d)(this.state.prices[e],this.state.priceFormatter),s=Object(ke.b)(1,t,this.props.step,-1,this.state.priceFormatter);this.setState(t=>({prices:t.prices.slice(1).concat(s),selected:t.selected===e?e-1:t.selected-1}))}_getDropdownWidth(){if(this.state.isOpened&&null!==this._priceControl&&(this.context.mode===b.g.Popup||this.state.prices[0].length<=7)){return parseFloat(window.getComputedStyle(this._priceControl,null).getPropertyValue("width"))+2}}_onModifiedCallback(){this.props.onModifiedCallback&&this.props.onModifiedCallback()}}Oe.contextType=b.f,Oe.defaultProps={className:"",inputClassName:""};var Me=s("RRM5");function Ne(e){return r.createElement("div",{className:Me.relativePriceDropdownItem},r.createElement("div",{className:Me.price},e.price))}var Te=s("0rc0"),De=s("Nkvk");function Ie(e,t){return e.findIndex(e=>e.displayValue===t)}const xe=/^[-+]?[0-9]*\.?[0-9]+$/;function Be(e){return xe.test(e)}function Fe(e){return"ask"===e?"Ask":"bid"===e?"Bid":"Stop"}function He(e){return void 0!==e&&e>0?" + "+Math.abs(e):void 0!==e&&e<0?" - "+Math.abs(e):""}function Re(e,t){return Fe(e)+He(Math.round(t||0))}function Ve(e){return void 0!==e?String(e):"0"}function Ae(e,t){const s=e.offset;return r=e.base,o=function(e,t){return(Math.abs(e)>=1?e:0)+(1===t?1:-1)}(s,t),{displayValue:Fe(r)+He(o),base:r,offset:o};var r,o}function je(e,t){const s=[],r=[],o={displayValue:Fe(e.base)+He(e.offset),base:e.base,offset:e.offset};for(let e=0;e<t;e++)s.unshift(Ae(0===e?o:s[0],1)),r.push(Ae(0===e?o:r[e-1],-1));return[...s,o,...r]}function We(){return"phone"!==De.mediaState.device&&"phone-vertical"!==De.mediaState.device?6:4}var Le=s("vwxn");const ze=Object(me.b)(Ce.a),qe=window.t("Ticks",{context:"price"}),Ke=window.t("Price format is invalid.");class Ue extends r.PureComponent{constructor(e){super(e),this._priceInput=null,this._priceControl=null,this._dropdown=null,this._setDropdownRef=e=>{this._dropdown=e},this._onMouseOver=e=>{this.setState({mouseOver:!0})},this._onMouseOut=e=>{this.setState({mouseOver:!1})},this._onOutsideClick=e=>{this.state.isOpened&&this._dropdown&&!this._dropdown.contains(e.target)&&this._closeDropdown()},this._onFocus=e=>{this.setState({isEditing:!0,displayValue:Ve(this.state.value.offset)},()=>{var e,t;q.mobiletouch||null===this._priceInput||(e=this._priceInput,t=this.state.displayValue.length,e.setSelectionRange&&(e.focus(),e.setSelectionRange(0,t),e.select()))}),this.props.onControlFocused&&this.props.onControlFocused(1),this.props.onFocus&&this.props.onFocus(e)},this._onBlur=e=>{this.props.onBlur&&this.props.onBlur(e);const t=this.state.prices[0].base,s=Ie(this.state.prices,Re(t,this.state.value.offset)),r=0<=s&&s<=this.state.prices.length-1?s:Math.floor(this.state.prices.length/2);this.setState({isEditing:!1,displayValue:this.state.prices[r].displayValue,selected:r},()=>{this._trackExitEditingModeEvent(this.state.prices[r].offset)})},this._onInputChange=e=>{this._onModifiedCallback()
;const t=e.currentTarget.value;if(Be(t)){const e={base:this.state.value.base,offset:Number(t)},s=je(e,We()),r=Ie(s,Re(e.base,e.offset));this.setState({displayValue:t,prices:s,selected:r,isOpened:!1},()=>{this._onPriceSelected(e)})}else this.setState({displayValue:t,isOpened:!1})},this._onTouchStart=e=>{e.stopPropagation(),this._swipeState.y=e.touches[0].clientY},this._onTouchMove=e=>{if(e.preventDefault(),e.stopPropagation(),e.changedTouches&&e.changedTouches.length&&null!==this._swipeState.y){const t=e.changedTouches[0].clientY-this._swipeState.y;if(Math.abs(t)<10)return;this._swipeState.direction=t>0?"up":"down","up"===this._swipeState.direction?this._prependPriceOnTouchMove():"down"===this._swipeState.direction&&this._appendPriceOnTouchMove()}},this._onTouchEnd=e=>{e.stopPropagation(),this._resetSwipeState()},this._onDropdownWheelNoPassive=e=>{e.preventDefault(),e.stopPropagation(),e.deltaY<0?this._prependPriceOnWheel():this._appendPriceOnWheel()},this._onInputMouseWheel=e=>{e.preventDefault(),e.stopPropagation(),this._onModifiedCallback(),this._scrollPriceOnWheel(e.deltaY<0?1:-1)},this._onSelect=(e,t)=>{this.setState(s=>({highlight:!0,displayValue:this.state.isEditing?Ve(t.offset):t.text,selected:e}),()=>{this._onModifiedCallback(),this._closeDropdown(),this._onPriceSelected(),this.setState({isEditing:!1},()=>{this._blurInput()})})},this._onNavigate=(e,t)=>{const s=this.state.command&&"prev"===this.state.command.name,r=this.state.command&&"next"===this.state.command.name;s?this._prependPriceOnNavigate():r&&this._appendPriceOnNavigate()},this._onOpenBtnClick=e=>{var t,s;e.preventDefault(),e.stopPropagation(),this.state.isOpened?this._closeDropdown():(this._openDropdown(),q.mobiletouch?null===(s=this._priceInput)||void 0===s||s.blur():null===(t=this._priceInput)||void 0===t||t.focus(),this.props.onControlFocused&&this.props.onControlFocused(1),this.setState({isEditing:!1,displayValue:this.state.displayValue},()=>{!q.mobiletouch&&this._priceInput&&this._priceInput.setSelectionRange(this.state.displayValue.length,this.state.displayValue.length)}))},this._switchEditingMode=e=>{e.preventDefault();const t=Number(this.state.displayValue);if(Number.isInteger(t))this.setState({isEditing:!1},()=>{this._blurInput()});else{const e=Math.round(t),s={base:this.state.value.base,offset:e},r=je(s,We()),o=Ie(r,Re(s.base,s.offset));this.setState({displayValue:String(e),prices:r,selected:o,isEditing:!1},()=>{this._onPriceSelected(),this._blurInput()})}},this._setPriceInput=e=>{this._priceInput=e},this._setPriceControl=e=>{this._priceControl=e},this._scrollPriceOnArrowUp=e=>{e.preventDefault(),this._onModifiedCallback(),this._prependPriceOnNavigate()},this._scrollPriceOnArrowDown=e=>{e.preventDefault(),this._onModifiedCallback(),this._appendPriceOnNavigate()},this._selectPrev=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"prev"}})},this._selectNext=e=>{e.preventDefault(),this._onModifiedCallback(),this.setState({command:{name:"next"}})},this._openDropdown=()=>{this.setState({highlight:!0,isOpened:!0,
keyboardEventHandlers:this._getKeyboardEventHandlers("open")})},this._closeDropdownOnKeyDown=e=>{e.preventDefault(),this._closeDropdown(),this.setState({isEditing:!1,displayValue:this.state.displayValue},()=>{this._blurInput()})},this._closeDropdown=()=>{var e;const t={isOpened:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")};if(-1===Ie(this.state.prices,this.state.displayValue)||this.state.selected!==Math.floor(this.state.prices.length/2)){const e=je({base:this.state.value.base,offset:this.state.value.offset||0},We()),s=Ie(e,this.state.displayValue);this.setState({...t,prices:e,selected:s})}else this.setState(t);q.mobiletouch&&(null===(e=this._priceInput)||void 0===e||e.blur())},this._trackExitEditingModeEvent=e=>{this.props.trackEvent&&this.props.trackEvent("Order Ticket","Relative Price - Exit Editing Mode",String(e))};const t=Re(e.initialValue.base,e.initialValue.offset),s=je(this.props.initialValue,We()),r=Ie(s,t);this.state={value:e.initialValue,displayValue:t,prices:s,selected:r,highlight:this.props.highlight,isOpened:!1,isEditing:!1,mouseOver:!1,keyboardEventHandlers:this._getKeyboardEventHandlers("close")},this._resetSwipeState()}render(){const e=a(Le.relativePriceControl,this.props.className),t=r.createElement("span",{className:Le.pipsLabel},qe),s=a(Le.openIcon,this.state.isOpened&&Le.opened,this.props.status===b.h.Wait&&Le.wait),o=r.createElement("div",{className:Le.openButton,onClick:this._onOpenBtnClick},r.createElement("div",{className:Le.iconWrapper},r.createElement(S.a,{className:s,icon:we}))),i=this.state.isEditing&&!Be(this.state.displayValue),n=i||this.props.error,l=i?Ke:this.props.errorMessage;return r.createElement(L.a,{click:!0,mouseDown:!0,touchStart:!0,handler:this._onOutsideClick},s=>r.createElement("span",{className:e,ref:s},r.createElement(ze,{className:this.props.inputClassName,containerReference:this._setPriceControl,inputReference:this._setPriceInput,keyboardEventHandlers:this.state.keyboardEventHandlers,value:this.state.displayValue,readonly:this.state.isOpened,warning:this.props.warning,error:n,errorMessage:l,onFocus:this._onFocus,onBlur:this._onBlur,onChange:this._onInputChange,onWheelNoPassive:this._onInputMouseWheel,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,noReadonlyStyles:!0,highlight:this.state.highlight,highlightRemoveRoundBorder:this.props.highlightRemoveRoundBorder,fontSizeStyle:this.props.fontSizeStyle},o),t,r.createElement(be.a,{anchor:"bottom",root:"document",reference:this._setDropdownRef,className:Le.list,command:this.state.command,isOpened:this.state.isOpened,items:this._makeListItems(),itemsClassName:Le.item,selected:this.state.selected,selectedClassName:Le.selected,target:null!==this._priceControl?this._priceControl:void 0,attachmentOffsetY:3,inheritWidthFromTarget:!0,shouldScrollIfNotVisible:!1,onSelect:this._onSelect,onNavigate:this._onNavigate,onDropdownTouchStart:this._onTouchStart,onDropdownTouchMove:this._onTouchMove,onDropdownTouchEnd:this._onTouchEnd,onDropdownWheelNoPassive:this._onDropdownWheelNoPassive})))}
static getDerivedStateFromProps(e,t){const s=Re(e.initialValue.base,e.initialValue.offset);if(!1===Object(Te.h)(t.value,e.initialValue)||t.highlight!==e.highlight){const r=je(e.initialValue,We()),o=Ie(r,s);return{...t,highlight:e.highlight,value:e.initialValue,displayValue:t.isEditing?Ve(e.initialValue.offset):s,prices:r,selected:o}}return null}_blurInput(){!q.mobiletouch&&this._priceInput&&this._priceInput.blur()}_onPriceSelected(e){if("function"==typeof this.props.onPriceSelected){const t=void 0!==e?e:this.state.prices[this.state.selected],s={base:t.base,offset:t.offset};this.props.onPriceSelected(s)}}_onModifiedCallback(){this.props.onModifiedCallback&&this.props.onModifiedCallback()}_resetSwipeState(){this._swipeState={direction:null,y:null}}_getKeyboardEventHandlers(e){return"close"===e?{[me.a.UpArrow]:this._scrollPriceOnArrowUp,[me.a.DownArrow]:this._scrollPriceOnArrowDown,[me.a.Enter]:this._switchEditingMode}:{[me.a.Enter]:this._closeDropdownOnKeyDown,[me.a.Escape]:this._closeDropdownOnKeyDown,[me.a.UpArrow]:this._selectPrev,[me.a.DownArrow]:this._selectNext}}_makeListItems(){return this.state.prices.map((e,t)=>({base:e.base,offset:e.offset,text:e.displayValue,elem:r.createElement(Ne,{price:e.displayValue})}))}_prependPriceOnWheel(){const e=Ae(this.state.prices[0],1);this.setState(t=>({prices:[e].concat(t.prices.slice(0,-1)),selected:0===t.selected?1:t.selected+1}))}_appendPriceOnWheel(){const e=this.state.prices.length-1,t=Ae(this.state.prices[e],-1);this.setState(s=>({prices:s.prices.slice(1).concat(t),selected:s.selected===e?e-1:s.selected-1}))}_scrollPriceOnWheel(e){const t=Ae(this.state.prices[this.state.selected],e);this.setState({displayValue:this.state.isEditing?Ve(t.offset):t.displayValue},()=>{1===e?this._prependPriceOnNavigate():this._appendPriceOnNavigate()})}_prependPriceOnNavigate(){const e=Ae(this.state.prices[0],1);this.setState(t=>{const s=[e].concat(t.prices.slice(0,-1)),r=this.state.prices.length-1;let o;return o=this.state.selected<=0?0:this.state.selected>r?r:t.selected,{prices:s,selected:o}},()=>{this._onPriceSelected()})}_appendPriceOnNavigate(){const e=Ae(this.state.prices[this.state.prices.length-1],-1);this.setState(t=>{const s=t.prices.slice(1).concat(e),r=this.state.prices.length-1;let o;return o=this.state.selected<=0?0:this.state.selected>r?r:t.selected,{prices:s,selected:o}},()=>{this._onPriceSelected()})}_prependPriceOnTouchMove(){const e=this.state.prices[0],t=[];t.unshift(Ae(e,1)),this.setState(e=>({prices:t.concat(e.prices.slice(0,this.state.prices.length-1)),selected:0===e.selected?1:e.selected+1}))}_appendPriceOnTouchMove(){const e=this.state.prices.length-1,t=this.state.prices[e],s=[];s.push(Ae(t,-1)),this.setState(t=>({prices:t.prices.slice(1).concat(s),selected:t.selected===e?e-1:t.selected-1}))}}function Je(e){const t=e.relativePrice.value();return null!==t?t:{base:1===e.side.value()?"ask":"bid",offset:0}}function Ge(e,t){return e.status!==b.h.Wait&&e.focusedControl===t}Ue.defaultProps={className:"",inputClassName:""};var Qe=s("EVs3");function Xe(e){
const t=r.useContext(Y.a),s=t.value.showRelativePriceControl&&!e.isRelativePriceControlHidden?2:1,o=e.status!==b.h.Wait&&e.error.res&&"warning"===e.error.severity;return r.createElement("div",{className:Qe.controlGroup},r.createElement("div",{className:Qe.title},e.groupTitle),r.createElement(ue.a,{className:Qe.controlContainer,cols:s,rows:1,disablePositionAdjustment:!0},r.createElement(Oe,{...i(0),className:Qe.control,priceType:e.priceType,inputClassName:a(Qe.input,e.status===b.h.Wait&&Qe.wait),status:e.status,displayPrice:e.absolutePrice,step:e.step,ask:e.ask,bid:e.bid,last:e.last,side:e.side,priceFormatter:e.priceFormatter,warning:o,error:e.error.res&&"error"===e.error.severity&&Ge(e,0),errorMessage:e.errorMessage,errorHandler:e.errorHandler,onControlFocused:e.onControlFocused,onPriceSelected:e.onAbsolutePriceSelected,displayPriceLabel:!e.isRelativePriceControlHidden,trackEvent:e.trackEvent,onModifiedCallback:e.modifiedAbsolutePriceControlStat,focus:e.focus,fontSizeStyle:e.fontSizeStyle}),t.value.showRelativePriceControl&&!e.isRelativePriceControlHidden&&r.createElement(Ue,{...i(1),className:a(Qe.control,Qe.relativePriceControl),inputClassName:a(Qe.input,e.status===b.h.Wait&&Qe.wait),status:e.status,initialValue:e.relativePrice,error:e.error.res&&"error"===e.error.severity&&Ge(e,1),errorMessage:e.errorMessage,onControlFocused:e.onControlFocused,onPriceSelected:e.onRelativePriceSelected,trackEvent:e.trackEvent,onModifiedCallback:e.modifiedRelativePriceControlStat,fontSizeStyle:e.fontSizeStyle})));function i(s){const r={highlightRemoveRoundBorder:0};return Ge(e,s)&&t.value.showRelativePriceControl&&(r.highlight=!0),r}}class Ye extends r.PureComponent{constructor(e){super(e),this._errorHandler=e=>{this.props.model.setControlError(e)},this._updatePrice=e=>{null!==e&&this._callback()},this._updateRelativePrice=e=>{null!==e&&this._callback()},this._onAbsolutePriceSelected=e=>{this.props.model.onAbsolutePriceSelected(e)},this._onRelativePriceSelected=e=>{this.props.model.onRelativePriceSelected(e)},this._onControlFocused=e=>{this.props.model.focusedControl.setValue(e),this.props.model.onControlFocused.fire()},this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel(this.props.model)}render(){const e=this.props.model,t=e.quotes.value();return r.createElement(Xe,{status:e.status.value(),priceType:this.props.priceType,groupTitle:this.props.groupTitle,focusedControl:e.focusedControl.value(),absolutePrice:e.displayPrice.value(),relativePrice:Je(e),errorHandler:this._errorHandler,step:e.step.value(),ask:t.ask,bid:t.bid,last:t.last,side:e.side.value(),priceFormatter:e.formatter,error:e.error.value(),errorMessage:e.error.value().msg,onAbsolutePriceSelected:this._onAbsolutePriceSelected,onRelativePriceSelected:this._onRelativePriceSelected,modifiedAbsolutePriceControlStat:e.modifiedAbsolutePriceControlStat,modifiedRelativePriceControlStat:e.modifiedRelativePriceControlStat,onControlFocused:this._onControlFocused,
isRelativePriceControlHidden:e.isRelativePriceControlHidden,trackEvent:this.props.trackEvent,focus:this.props.focus,fontSizeStyle:this.props.fontSizeStyle})}_subscribeToModel(e){e.focusedControl.subscribe(this._callback),e.displayPrice.subscribe(this._updatePrice),e.error.subscribe(this._callback),e.relativePrice.subscribe(this._updateRelativePrice),e.quotes.subscribe(this._callback),e.side.subscribe(this._callback),e.orderType.subscribe(this._callback),e.step.subscribe(this._callback)}_unsubscribeFromModel(e){e.focusedControl.unsubscribe(this._callback),e.displayPrice.unsubscribe(this._updatePrice),e.error.unsubscribe(this._callback),e.relativePrice.unsubscribe(this._updateRelativePrice),e.quotes.unsubscribe(this._callback),e.side.unsubscribe(this._callback),e.orderType.unsubscribe(this._callback),e.step.unsubscribe(this._callback)}}const Ze=Object(n.t)("Order price"),$e=Object(n.t)("Stop price"),et=Object(n.t)("Limit price");class tt extends r.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this.props.model.orderType.subscribe(this._callback)}componentWillUnmount(){this.props.model.orderType.unsubscribe(this._callback)}render(){const e=this.props.model.orderType.value();if(2===e)return null;{const t=3===e?this.props.model.stopPriceModel:this.props.model.limitPriceModel;return r.createElement(r.Fragment,null,4===e&&r.createElement(Ye,{key:"stopPrice",model:this.props.model.stopPriceModel,priceType:b.k.Stop,groupTitle:$e,trackEvent:this.props.trackEvent,focus:this.props.focus,fontSizeStyle:"medium"}),r.createElement(Ye,{key:t.id,model:t,priceType:3===e?b.k.Stop:b.k.Limit,groupTitle:4===e?et:Ze,trackEvent:this.props.trackEvent,focus:this.props.focus,fontSizeStyle:"medium"}))}}}var st=s("twDL"),rt=s("a2Ze"),ot=s("MiOS");class it extends r.PureComponent{constructor(e){super(e),this.onDurationChanged=e=>{this.props.model.currentDuration.setValue(e),this.props.model.onModifiedCallback()},this._onClick=()=>{this.props.model.onControlFocused.fire()},this._callback=()=>this.forceUpdate()}componentDidMount(){this.props.model.currentDuration.subscribe(this._callback),this.props.model.orderType.subscribe(this._callback)}componentWillUnmount(){this.props.model.currentDuration.unsubscribe(this._callback),this.props.model.orderType.unsubscribe(this._callback)}render(){return r.createElement(rt.a,{currentDuration:this.props.model.currentDuration.value(),durationsMetaInfo:this._getDurationsMetaInfo(),onDurationChanged:this.onDurationChanged,onClose:this.props.onClose,onClick:this._onClick})}_getDurationsMetaInfo(){const e=this.props.model.orderType.value(),t=this.props.model.durationsMetaInfo;return Object(ot.a)(e,t)}}var nt=s("O8MG");class at extends r.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this.context.resizerWidth&&this.context.resizerWidth.subscribe(this._callback)}componentWillUnmount(){this.context.resizerWidth&&this.context.resizerWidth.unsubscribe(this._callback)}render(){const e={width:this.props.progress+"%"
},t=a(nt.progress,100===this.props.progress&&nt.fullFilled,this.props.usedMargin>this.props.availableMargin&&nt.marginOverflow);return r.createElement("div",{className:a(nt.progressBarContainer,this.props.wait&&nt.wait)},r.createElement("div",{className:nt.marginsContainer},r.createElement("div",{className:nt.usedMargin},r.createElement("div",null,Object(n.t)("Margin used")),r.createElement("span",null,Object(Te.k)(this.props.usedMargin))),r.createElement("div",{className:nt.availableMargin},r.createElement("div",null,Object(n.t)("Margin available")),r.createElement("span",null,Object(Te.k)(this.props.availableMargin)))),r.createElement("div",{className:nt.progressBar},r.createElement("div",{className:nt.track},r.createElement("div",{className:t,style:e}))))}}at.contextType=b.f;var lt=s("k2TW");function ct(e){const t=e.hasMarginMeter?r.createElement(at,{usedMargin:e.usedMargin,availableMargin:e.availableMargin,progress:e.marginRatio,wait:e.status===b.h.Wait}):void 0;return r.createElement("div",{className:lt.orderInfo},r.createElement("div",{className:lt.title},e.title),r.createElement("div",{className:lt.contentWrapper},t,r.createElement(E.a,{rows:e.infoTableData.rows,header:e.infoTableData.header,disabled:e.status===b.h.Wait,rightAlignedValues:!0})))}class pt extends r.PureComponent{constructor(e){super(e),this._callback=()=>this.forceUpdate()}componentDidMount(){this._subscribeToModel(this.props.model)}componentWillUnmount(){this._unsubscribeFromModel(this.props.model)}render(){const e=this.props.model,t=e.usedMargin().value(),s=e.availableMargin().value();return r.createElement(ct,{title:e.title(),hasMarginMeter:e.hasMarginMeter(),usedMargin:t,availableMargin:s,marginRatio:Object(Te.f)(t,s),infoTableData:e.infoTableData().value(),status:this.props.status})}_subscribeToModel(e){e.availableMargin().subscribe(this._callback),e.usedMargin().subscribe(this._callback),e.infoTableData().subscribe(this._callback)}_unsubscribeFromModel(e){e.availableMargin().unsubscribe(this._callback),e.usedMargin().unsubscribe(this._callback),e.infoTableData().unsubscribe(this._callback)}}var dt=s("oiZD"),ut=s("zM7N"),ht=s("OOXv");function mt(e){const{imageBlack:t,image:s,controls:o,text:i,title:n}=e,a=Object(oe.a)({watchedValue:dt.watchedTheme});return r.createElement("div",{className:ht.messageBlock},r.createElement("div",{className:ht.image,dangerouslySetInnerHTML:{__html:void 0!==t&&a===ut.a.Dark?t:s}}),r.createElement("div",{className:ht.title},n),r.createElement("div",{className:ht.text,dangerouslySetInnerHTML:{__html:i||""}}),o&&r.createElement("div",{className:ht.controls},o))}var bt=s("ogJP"),vt=s("A/IL"),_t=s("zS8N"),gt=s("R1Qg"),ft=s("ZYKY"),Ct=s("BJPy")
;const wt=Object(d.getLogger)("Trading.OrderPanel"),kt=Object(n.t)("Quantity"),Et=Object(n.t)("Amount"),yt=Object(n.t)("Non tradable symbol"),St=Object(n.t)("Log In"),Pt=Object(n.t)("Connect to broker"),Ot=Object(n.t)("Log into your TradingView account to trade"),Mt=Object(n.t)("Log into your broker/exchange account to trade"),Nt=Object(n.t)("Sign up"),Tt=Object(n.t)("Connect");class Dt extends r.PureComponent{constructor(e,t){super(e,t),this._orderWidgetBlock=null,this._orderTicketBlock=null,this._button=null,this._resizeHandler=null,this._focusBlock=()=>{null!==this._orderWidgetBlock&&this._orderWidgetBlock.focus()},this._onLayoutResizeHandleMousedown=e=>{if(e.defaultPrevented||!e.cancelable)return;e.preventDefault();const t=Math.max(this._orderTicketBlock?this._orderTicketBlock.clientHeight:0,0);let s;s="touches"in e?e.touches[0].clientY:e.clientY;const r=e=>{let r;e.preventDefault(),r="touches"in e?e.touches[0].clientY:e.clientY;let o=t+(r-s);o<445&&(o=445),this._setOrderTicketHeight(o)},o=()=>{const{orderTicketHeight:e}=this.state;document.removeEventListener("mousemove",r),document.removeEventListener("touchmove",r),document.removeEventListener("mouseup",o),document.removeEventListener("touchend",o),void 0!==e&&0!==e&&Object(bt.isInteger)(e)&&c.setValue(h.a.PANEL_HEIGHT,e)};document.addEventListener("mousemove",r),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("mouseup",o),document.addEventListener("touchend",o,{passive:!1})},this._setOrderWidgetRef=e=>{this._orderWidgetBlock=e},this._setOrderTicketRef=e=>{this._orderTicketBlock=e},this._setButtonRef=e=>{this._button=e},this._setResizeHandlerRef=e=>{this._resizeHandler=e},this._forceUpdateAndReCalculateBounds=()=>{this.forceUpdate(()=>this.props.popupController&&this.props.popupController.recalculateBounds())},this._onSelectTab=e=>{this.props.model.orderType.setValue(e)},this._onStatusChange=e=>{var t;e===b.h.Wait&&(null===(t=this._orderWidgetBlock)||void 0===t?void 0:t.contains(document.activeElement))&&(u.isIE?HTMLElement.prototype.blur.call(document.activeElement):document.activeElement instanceof HTMLElement?document.activeElement.blur():wt.logWarn("Failed to deselect: active element is not HTMLElement")),this._callback()},this._onKeyDown=e=>{13===e.keyCode&&!1===this.props.model.disabled.value()&&this._button&&(this._button.focus(),e.defaultPrevented||this._button.click())},this._handleClickSignIn=()=>{showSignModal({source:"Trading panel",sourceMeta:"Chart"})},this._handleClickSignUp=()=>{showSignModal({mode:"signup",source:"Trading panel",sourceMeta:"Chart"})},this._selectBroker=()=>{this.props.model.noBroker&&this.props.model.selectBroker()},this._callback=()=>{this.forceUpdate()};const s=this._isOrderInfoShown()?parseInt(c.getValue(h.a.PANEL_HEIGHT,"")):NaN;this.state={orderTicketHeight:isNaN(s)?void 0:s,orderInfoAndSeparatorHeight:void 0}}componentDidMount(){this._subscribeToModel(this.props.model),this.props.settings.subscribe(this._forceUpdateAndReCalculateBounds),
null!==this._resizeHandler&&(this._resizeHandler.addEventListener("mousedown",this._onLayoutResizeHandleMousedown,{passive:!1}),this._resizeHandler.addEventListener("touchstart",this._onLayoutResizeHandleMousedown,{passive:!1}))}componentDidUpdate(){var e;const{orderTicketHeight:t,orderInfoAndSeparatorHeight:s}=this.state,r=null===(e=this._orderWidgetBlock)||void 0===e?void 0:e.clientHeight;if(void 0!==r&&void 0!==t&&t!==r&&this._isOrderPreviewShown()&&(this._setOrderInfoAndSeparatorHeight(r-t),c.setValue(h.a.PANEL_HEIGHT,r),this._setOrderTicketHeight(r)),void 0!==r&&void 0!==t&&t===r&&this._isOrderInfoShown()&&void 0!==s){const e=r-s;this._setOrderTicketHeight(e),c.setValue(h.a.PANEL_HEIGHT,e)}}componentWillUnmount(){var e;const{orderTicketHeight:t,orderInfoAndSeparatorHeight:s}=this.state,r=null===(e=this._orderWidgetBlock)||void 0===e?void 0:e.clientHeight;void 0!==r&&void 0!==t&&t===r&&void 0!==s&&c.setValue(h.a.PANEL_HEIGHT,r-s),this._unsubscribeFromModel(this.props.model),this.props.settings.unsubscribe(this._forceUpdateAndReCalculateBounds),null!==this._resizeHandler&&(this._resizeHandler.removeEventListener("mousedown",this._onLayoutResizeHandleMousedown),this._resizeHandler.removeEventListener("touchstart",this._onLayoutResizeHandleMousedown))}render(){const{model:e,settings:t,trackEvent:s}=this.props,{orderTicketHeight:o}=this.state,i=this.context.mode,n=e.status.value(),c=n===b.h.Wait||u.CheckMobile.any()?void 0:this.props.focus,p=this._quantityTitle(e),d=this._areBracketsSupported(e)||this._isCryptoBracketsSupported(e),h=this._isDurationSupported(e),v=this._isAmountEditable(e),_={value:t.value(),setValue:t.setValue.bind(t)},g=e.limitPriceModel&&e.limitPriceModel.isRelativePriceControlHidden||e.stopPriceModel&&e.stopPriceModel.isRelativePriceControlHidden,f={};(e.needSignIn||e.noBroker||e.notTradableText)&&(f.flexGrow=1),i===b.g.Panel&&null!==e.orderInfoModel&&void 0!==o&&0!==o&&(f.height=o);const C=r.createElement(r.Fragment,null,e.sideModel&&r.createElement("div",{className:Ct.side},r.createElement(w,{model:e.sideModel,disabled:e.existingOrder})),e.limitPriceModel&&e.stopPriceModel&&r.createElement(V,{activeTab:e.orderType.value(),disabled:e.existingOrder,supportMarketOrders:e.supportMarketOrders,supportLimitOrders:e.supportLimitOrders,supportStopOrders:e.supportStopOrders,supportStopLimitOrders:e.supportStopLimitOrders,onSelect:this._onSelectTab}),e.limitPriceModel&&e.stopPriceModel&&e.quantityModel&&r.createElement("div",{className:a(Ct.centerBlock)},2!==e.orderType.value()&&r.createElement(tt,{model:e,trackEvent:s,focus:c}),v?r.createElement("div",{className:Ct.quantityBracketsWrapper},r.createElement("div",{className:Ct.title},p),e.supportCryptoExchangeOrderTicket?r.createElement(he,{model:e.quantityModel,focus:c}):r.createElement(te,{model:e.quantityModel,symbolHasLotSize:e.symbolHasLotSize,trackEvent:s,focus:c}),d&&r.createElement(r.Fragment,null,r.createElement("div",{className:Ct.separator}),r.createElement(A.a,{model:e,focus:c}))):d&&r.createElement("div",{className:Ct["brackets-wrapper"]
},r.createElement("div",{className:Ct.separator}),r.createElement("div",{className:Ct.brackets},r.createElement(A.a,{model:e,focus:c}))),Array.isArray(e.customFieldModels.value())&&e.customFieldModels.value().length>0&&r.createElement("div",{className:Ct.customFieldsWrapper},r.createElement("div",{className:Ct.separator}),r.createElement(vt.a,{customFieldModels:e.customFieldModels.value(),status:e.status,onClose:this._focusBlock})),h&&r.createElement("div",{className:Ct.duration},r.createElement(it,{onClose:this._focusBlock,model:Object(l.ensureDefined)(e.durationModel)}))),e.buttonModel&&r.createElement("div",{className:Ct.doneButton},r.createElement(st.a,{model:e,reference:this._setButtonRef})),!1);return r.createElement(Y.a.Provider,{value:_},r.createElement("div",{className:a(Ct.orderWidget),onKeyDown:this._onKeyDown,tabIndex:-1,ref:this._setOrderWidgetRef},r.createElement("div",{ref:this._setOrderTicketRef,className:Ct.orderTicket,style:f},e.headerModel&&r.createElement(m.a,{model:e.headerModel,mode:i,className:Ct.header,showQuantityInsteadOfAmount:e.showQuantityInsteadOfAmount,currency:e.currency,supportBrackets:e.supportBrackets,supportOrderPreview:e.supportPlaceOrderPreview||e.supportModifyOrderPreview,showRiskControls:e.showRiskControls,hideRelativePriceSettingsItem:g}),!1,!1,e.notTradableText&&this._renderNotTradableBlock(e),this._isOrderPreviewShown()?r.createElement(N,{model:Object(l.ensureNotNull)(e.orderPreviewModel),side:e.side(),loading:e.loading}):C),this._isOrderInfoShown()&&r.createElement("div",{className:Ct.orderInfoAndSeparator},r.createElement("div",{className:Ct.separator}),r.createElement("div",{className:Ct.resizeHandler,ref:this._setResizeHandlerRef}),r.createElement(pt,{"data-name":"order-info",model:Object(l.ensureNotNull)(e.orderInfoModel),status:n}))))}_setOrderTicketHeight(e){null!==this._orderTicketBlock&&this.setState({orderTicketHeight:e})}_setOrderInfoAndSeparatorHeight(e){this.setState({orderInfoAndSeparatorHeight:e})}_subscribeToModel(e){e.orderType.subscribe(this._forceUpdateAndReCalculateBounds),e.status.subscribe(this._onStatusChange),e.customFieldModels.subscribe(this._callback),e.isNoQuotes.subscribe(this._callback)}_unsubscribeFromModel(e){e.orderType.unsubscribe(this._forceUpdateAndReCalculateBounds),e.status.unsubscribe(this._onStatusChange),e.customFieldModels.unsubscribe(this._callback),e.isNoQuotes.unsubscribe(this._callback)}_quantityTitle(e){return e.showQuantityInsteadOfAmount?kt:Et}_areBracketsSupported(e){const t=Boolean(2===this.props.model.orderType.value()&&e.supportMarketBrackets||2!==this.props.model.orderType.value());return Boolean(e.supportBrackets&&t)}_isDurationSupported(e){var t;return Boolean(e.durationModel&&(!e.existingOrder||e.existingOrder&&e.supportModifyDuration)&&(null===(t=e.durationModel)||void 0===t?void 0:t.isDurationsAvailable()))}_isCryptoBracketsSupported(e){return Boolean(e.supportCryptoBrackets)}_isAmountEditable(e){return!1===e.existingOrder||Boolean(e.existingOrder&&e.supportEditAmount)}_isOrderPreviewShown(){const{model:e}=this.props
;return e.status.value()===b.h.Preview&&null!==e.orderPreviewModel}_isOrderInfoShown(){const{model:e}=this.props,t=e.status.value(),s=this._getCountOrderInfoTableRows();return this.context.mode===b.g.Panel&&s>0&&t!==b.h.Preview&&p.enabled("order_info")}_getCountOrderInfoTableRows(){var e,t;return(null===(t=null===(e=this.props.model.orderInfoModel)||void 0===e?void 0:e.infoTableData().value().rows)||void 0===t?void 0:t.length)||0}_renderSignInBlock(){return r.createElement(mt,{image:ft,title:St,text:Ot,controls:r.createElement(r.Fragment,null,r.createElement("div",{className:Ct.button},r.createElement(k.a,{onClick:this._handleClickSignIn,appearance:"stroke"},St)),r.createElement("div",{className:Ct.button},r.createElement(k.a,{onClick:this._handleClickSignUp,appearance:"stroke"},Nt)))})}_renderNoBrokerBlock(){return r.createElement(mt,{image:ft,title:Pt,text:Mt,controls:r.createElement(k.a,{onClick:this._selectBroker,appearance:"stroke"},Tt)})}_renderNotTradableBlock(e){const t=e.tradableSolution?r.createElement(k.a,{onClick:e.tradableSolution.apply},e.tradableSolution.title):void 0;return r.createElement(mt,{image:_t,imageBlack:gt,title:yt,text:e.notTradableText,controls:t})}}Dt.contextType=b.f;var It=s("bWo7");class xt extends r.PureComponent{constructor(e){super(e),this._onKeyDown=e=>{27===e.keyCode&&this.props.onCancel&&this.props.onCancel()}}render(){return r.createElement("div",{className:It.orderPanel,onKeyDown:this._onKeyDown},r.createElement(Dt,{model:this.props.model,settings:this.props.settings,key:this.props.model.id,trackEvent:this.props.trackEvent,focus:this.props.focus}))}}var Bt=s("FQhm"),Ft=s("AVTG"),Ht=s("WXjp"),Rt=s("/KDZ"),Vt=s("pafz"),At=s("uhCe"),jt=s("ZjKI"),Wt=s("H3n3");class Lt extends r.PureComponent{constructor(e){super(e),this._renderWidget=e=>r.createElement(Dt,{settings:Object(l.ensureDefined)(this.props.settings),model:Object(l.ensureNotNull)(this.props.model),key:Object(l.ensureNotNull)(this.props.model).id,trackEvent:this.props.trackEvent,focus:this.props.focus,popupController:e}),this._onKeyDown=e=>{27===e.keyCode&&this.props.onClose&&this.props.onClose()},this._handleClose=()=>{var e,t;null===(t=(e=this.props).onClose)||void 0===t||t.call(e)}}componentDidMount(){Bt.subscribe(jt.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null)}componentWillUnmount(){Bt.unsubscribe(jt.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null)}render(){return r.createElement(Rt.a,{rule:At.a.TabletSmall},e=>r.createElement(Ht.a,{className:Wt.dialog,isOpened:this.props.isOpened,onKeyDown:this._onKeyDown,fullscreen:e,"data-name":"order-dialog-popup"},r.createElement(Ft.a,{className:Wt.dialogBody},this.props.model&&this.props.settings&&r.createElement(Vt.a.Consumer,null,this._renderWidget))))}}s.d(t,"showOrderDialog",(function(){return qt})),s.d(t,"closeOrderDialog",(function(){return Kt})),s.d(t,"mountOrderPanel",(function(){return Jt})),s.d(t,"unmountOrderPanel",(function(){return Gt}));let zt=null;function qt(e,t,s,r){Kt();const o={model:e,settings:t,isOpened:!0,onClose:()=>{Kt(),
e.onDoneButtonClicked.reject(),o.model.headerModel&&(o.model.headerModel.pinButtonClicked().unsubscribe(null,o.onClose),o.model.headerModel.closeButtonClicked().unsubscribe(null,o.onClose)),zt&&i.unmountComponentAtNode(zt)},trackEvent:r,focus:s||Qt(e.orderType.value())};Ut(o),o.model.headerModel&&(o.model.headerModel.pinButtonClicked().subscribe(null,o.onClose),o.model.headerModel.closeButtonClicked().subscribe(null,o.onClose))}function Kt(){Ut({model:null,isOpened:!1})}function Ut(e){null===zt&&(zt=document.createElement("div"),document.body.appendChild(zt));const t=r.createElement(b.f.Provider,{value:{mode:e.model&&e.model.mode.value()||b.g.Panel,supportTrailingStop:Boolean(e.model&&e.model.supportTrailingStop)}},r.createElement(Lt,{...e}));i.render(t,zt)}function Jt(e,t,s,o,n,a){Gt(s);const l={model:e,settings:t,onClose:()=>{Gt(s),l.model.headerModel&&(l.model.headerModel.pinButtonClicked().unsubscribe(null,l.onClose),l.model.headerModel.closeButtonClicked().unsubscribe(null,l.onClose))},onCancel:()=>{l.model.headerModel&&l.model.headerModel.cancel()},trackEvent:a,focus:n||Qt(e.orderType.value())};l.model.headerModel&&(l.model.headerModel.pinButtonClicked().subscribe(null,l.onClose),l.model.headerModel.closeButtonClicked().subscribe(null,l.onClose)),function(e,t,s){const o=r.createElement(b.f.Provider,{value:{resizerWidth:s||null,mode:e.model.mode.value(),supportTrailingStop:Boolean(e.model.supportTrailingStop)}},r.createElement(xt,{...e}));i.render(o,t)}(l,s,o)}function Gt(e){i.unmountComponentAtNode(e)}function Qt(e){let t;switch(e){case 2:t=5;break;case 1:case 4:t=1;break;case 3:t=2;break;default:t=void 0}return t}},K3s3:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return p}));var r=s("q1tI"),o=s("TSYQ"),i=s("Eyy1"),n=s("5o6O");const a=n;function l(e){const t=o(e.className,n.tab,{[n.active]:e.isActive,[n.disabled]:e.isDisabled,[n.defaultCursor]:!!e.shouldUseDefaultCursor,[n.noBorder]:!!e.noBorder});return r.createElement("div",{className:t,onClick:e.onClick,ref:e.reference,"data-type":"tab-item","data-value":e.value,"data-name":"tab-item-"+e.value.toString().toLowerCase()},e.children)}function c(e){return class extends r.PureComponent{constructor(){super(...arguments),this.activeTab={current:null}}componentDidUpdate(){Object(i.ensureNotNull)(this._slider).style.transition="transform 350ms",this._componentDidUpdate()}componentDidMount(){this._componentDidUpdate()}render(){const{className:t}=this.props,s=this._generateTabs();return r.createElement("div",{className:o(t,n.tabs),"data-name":this.props["data-name"]},s,r.createElement(e,{reference:e=>{this._slider=e}}))}_generateTabs(){return this.activeTab.current=null,r.Children.map(this.props.children,e=>{const t=e,s=Boolean(t.props.isActive),o={reference:e=>{s&&(this.activeTab.current=e),t.props.reference&&t.props.reference(e)}};return r.cloneElement(t,o)})}_componentDidUpdate(){const e=Object(i.ensureNotNull)(this._slider).style;if(this.activeTab.current){
const t=this.activeTab.current.offsetWidth,s=this.activeTab.current.offsetLeft;e.transform=`translateX(${s}px)`,e.width=t+"px",e.opacity="1"}else e.opacity="0"}}}const p=c((function(e){return r.createElement("div",{className:n.slider,ref:e.reference})}))},L2Pi:function(e,t,s){e.exports={content:"content-1RMsqC2g",separator:"separator-1RMsqC2g",controls:"controls-1RMsqC2g",button:"button-1RMsqC2g",warning:"warning-1RMsqC2g",warning__icon:"warning__icon-1RMsqC2g",error:"error-1RMsqC2g"}},O8MG:function(e,t,s){e.exports={progressBarContainer:"progressBarContainer-323y76OT",marginsContainer:"marginsContainer-323y76OT",usedMargin:"usedMargin-323y76OT",availableMargin:"availableMargin-323y76OT",progressBar:"progressBar-323y76OT",track:"track-323y76OT",progress:"progress-323y76OT",fullFilled:"fullFilled-323y76OT",marginOverflow:"marginOverflow-323y76OT",wait:"wait-323y76OT"}},OOXv:function(e,t,s){e.exports={messageBlock:"messageBlock-2oxiSSwZ",image:"image-2oxiSSwZ",title:"title-2oxiSSwZ",text:"text-2oxiSSwZ",controls:"controls-2oxiSSwZ"}},QAe6:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var r=s("q1tI");const o=e=>{const[t,s]=Object(r.useState)(e.value());return Object(r.useEffect)(()=>{const t=e=>s(e);return e.subscribe(t),()=>e.unsubscribe(t)},[e]),[t,t=>e.setValue(t)]}},R1Qg:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="120" height="120" fill="none"><g clip-path="url(#adgm1bxe3)"><path fill="#2A2E39" fill-rule="evenodd" clip-rule="evenodd" d="M103.54 47.03a4.78 4.78 0 0 0-1.73 4.07c.98 10.62-2.18 22.78-9.61 33.6-14.03 20.43-37.97 28.36-53.47 17.72s-16.7-35.83-2.67-56.26c8.1-11.81 19.52-19.44 30.71-21.73a4.79 4.79 0 0 0 3.4-2.8c.64-1.47 1.43-2.9 2.38-4.28 7.3-10.5 21.14-13.47 30.93-6.62 9.78 6.85 11.8 20.91 4.52 31.42-1.3 1.87-2.8 3.5-4.46 4.88z"/><rect width="80" height="58" fill="#121722" stroke="#B2B5BE" stroke-width="2" rx="7" x="20" y="26"/><path stroke="#B2B5BE" stroke-linecap="round" stroke-width="2" d="M6 90h106"/><path fill="#B2B5BE" fill-rule="evenodd" clip-rule="evenodd" d="M48.53 50.6L52 54.05 53.06 53l-3.47-3.47 3.47-3.47L52 45l-3.47 3.47L45.06 45 44 46.06l3.47 3.47L44 53l1.06 1.06 3.47-3.47zM72.53 50.6L76 54.05 77.06 53l-3.47-3.47 3.47-3.47L76 45l-3.47 3.47L69.06 45 68 46.06l3.47 3.47L68 53l1.06 1.06 3.47-3.47z"/><path stroke="#B2B5BE" stroke-width="1.5" d="M51 64.5h17"/></g></svg>'},R36R:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><g fill="currentColor" stroke="none"><path d="M3 10h18v2H3z"/><path d="M11 2h2v18h-2z"/></g></svg>'},RRM5:function(e,t,s){e.exports={relativePriceDropdownItem:"relativePriceDropdownItem-DyjCJNlo",price:"price-DyjCJNlo"}},TZdo:function(e,t,s){e.exports={tabsContainer:"tabsContainer-3mSbLjkc",separator:"separator-3mSbLjkc"}},V1pJ:function(e,t,s){e.exports={wrapper:"wrapper-1CVEPTwn",control:"control-1CVEPTwn",label:"label-1CVEPTwn",units:"units-1CVEPTwn",single:"single-1CVEPTwn",calculatorIcon:"calculatorIcon-1CVEPTwn",isOpened:"isOpened-1CVEPTwn",
risk:"risk-1CVEPTwn",wait:"wait-1CVEPTwn"}},WUqb:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n}));var r,o=s("q1tI");!function(e){e[e.Enter=13]="Enter",e[e.Space=32]="Space",e[e.Backspace=8]="Backspace",e[e.DownArrow=40]="DownArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.LeftArrow=37]="LeftArrow",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(r||(r={}));class i{constructor(){this._handlers=new Map}registerHandlers(e){Object.keys(e).forEach(t=>{const s=parseInt(t);let r=e[s];if(Array.isArray(r)||(r=[r]),this._handlers.has(s)){const e=this._handlers.get(s);e&&r.forEach(t=>e.add(t))}else this._handlers.set(s,new Set(r))})}unregisterHandlers(e){Object.keys(e).forEach(t=>{const s=parseInt(t);let r=e[s];if(Array.isArray(r)||(r=[r]),this._handlers.has(s)){const e=this._handlers.get(s);e&&r.forEach(t=>e.delete(t))}})}deleteAllHandlers(){this._handlers=new Map}registerHandler(e,t){if(this._handlers.has(e)){const s=this._handlers.get(e);s&&s.add(t)}else this._handlers.set(e,new Set([t]))}unregisterHandler(e,t){if(this._handlers.has(e)){const s=this._handlers.get(e);s&&s.delete(t)}}listen(e){if(this._handlers.has(e.keyCode)){const t=this._handlers.get(e.keyCode);t&&t.forEach(t=>t(e))}}}function n(e){var t,s,r;return(r=class extends o.PureComponent{constructor(e){super(e),this._keyboardListener=new i,this._listener=this._keyboardListener.listen.bind(this._keyboardListener)}componentDidMount(){this._registerHandlers(this.props.keyboardEventHandlers)}componentDidUpdate(e){e.keyboardEventHandlers!==this.props.keyboardEventHandlers&&this._registerHandlers(this.props.keyboardEventHandlers)}render(){const{keyboardEventHandlers:t,...s}=this.props;return o.createElement(e,{...s,onKeyDown:this._listener})}_registerHandlers(e){e&&(this._keyboardListener.deleteAllHandlers(),this._keyboardListener.registerHandlers(e))}}).displayName=`KeyboardListener(${null!==(s=null!==(t=e.displayName)&&void 0!==t?t:e.name)&&void 0!==s?s:"Component"})`,r}},"X6/E":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 19" width="15" height="19"><path fill="currentColor" d="M2 0h11a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-8 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-8 4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM3 2a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H3z"/></svg>'},ZYKY:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132 76" width="132" height="76" fill="none"><mask fill="#fff" id="a"><path fill-rule="evenodd" clip-rule="evenodd" d="M114 76H24C10.745 76 0 65.255 0 52s10.745-24 24-24l.247.002C26.215 12.214 39.681 0 56 0c14.582 0 26.886 9.753 30.744 23.093A21.896 21.896 0 0 1 98 20c11.821 0 21.464 9.323 21.979 21.017C126.981 43.48 132 50.155 132 58c0 9.265-7 16.895-16 17.89V76h-2z"/></mask><path fill="currentColor" d="M24 28l.012-2H24v2zm.247.002l-.012 2 1.777.01.22-1.763-1.985-.247zm62.497-4.909l-1.921.556.72 2.49 2.226-1.328-1.025-1.718zm33.235 17.924l-1.999.087.06 1.35 1.274.45.665-1.887zM116 75.89l-.22-1.988-1.78.197v1.791h2zm0 .11v2h2v-2h-2zm-2-2H24v4h90v-4zm-90 0C11.85 74 2 64.15 2 52h-4c0 14.36 11.64 26 26 26v-4zM2 52c0-12.15 9.85-22 22-22v-4C9.64 26-2 37.64-2 52h4zm21.988-22l.247.001.024-4-.247-.001-.024 4zm2.244-1.751C28.077 13.45 40.702 2 56 2v-4C38.66-2 24.354 10.98 22.263 27.754l3.969.495zM56 2c13.668 0 25.206 9.142 28.823 21.649l3.842-1.111C84.567 8.365 71.497-2 56-2v4zm31.769 22.81A19.896 19.896 0 0 1 98 22v-4a23.896 23.896 0 0 0-12.28 3.376l2.049 3.435zM98 22c10.745 0 19.513 8.475 19.98 19.105l3.997-.176C121.415 28.17 110.896 18 98 18v4zm21.314 20.903C125.541 45.095 130 51.03 130 58h4c0-8.72-5.58-16.132-13.357-18.87l-1.329 3.773zM130 58c0 8.234-6.222 15.018-14.22 15.902l.44 3.976C126.222 76.772 134 68.296 134 58h-4zm-16 17.89V76h4v-.11h-4zm2-1.89h-2v4h2v-4z" mask="url(#a)"/><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M60 51.659a6 6 0 1 0-4 0V57a2 2 0 0 0 4 0v-5.341z"/></svg>'},a2Ze:function(e,t,s){"use strict";var r=s("YFKU"),o=s("q1tI"),i=s.n(o),n=s("Iksw"),a=s("4ko3"),l=s("N5tr"),c=s("uhCe"),p=s("82wv"),d=s("X0gx"),u=s("aIyQ"),h=s.n(u),m=s("MiOS"),b=s("mwqF"),v=s("qFKp"),_=s("yTrw"),g=s("qZIh"),f=s("rMpF"),C=s("QCsc"),w=s("eWKP"),k=s("8v5A");const E=v.CheckMobile.any();class y extends i.a.PureComponent{constructor(e){super(e),this._todayMidnight=new Date((new Date).setHours(0,0,0,0)),this._onSelect=()=>{this.props.onSelect(this.state.date,this.state.time)},this._onDateSelect=e=>{null!==e&&this.setState({date:e})},this._onTimeSelect=e=>{this.setState({time:S(e)})},this._onKeyDown=e=>{e.stopPropagation()},this.state={date:this.props.initDateTime,time:this.props.initDateTime}}render(){return i.a.createElement("div",{className:k.wrapper,onKeyDown:this._onKeyDown},i.a.createElement("div",{className:k.dateTimeWrapper},this.props.durationMetaInfo.hasDatePicker&&i.a.createElement(C.a,{minDate:this._todayMidnight,initial:this.state.date,InputComponent:w.a,withCalendar:!1,onPick:this._onDateSelect,revertInvalidData:!0}),this.props.durationMetaInfo.hasTimePicker&&i.a.createElement(g.a,{className:k.timeInput,value:(e=this.state.time,Object(f.m)(e.getHours())+":"+Object(f.m)(e.getMinutes())),onChange:this._onTimeSelect})),this.props.durationMetaInfo.hasDatePicker&&!E&&i.a.createElement(_.a,{key:this.state.date.valueOf(),selectedDate:this.state.date,minDate:this._todayMidnight,onSelect:this._onDateSelect,popupStyle:!1
}),i.a.createElement("div",{className:k.buttonWrapper},i.a.createElement(b.a,{className:k.button,type:"submit",size:"l",onClick:this._onSelect},this._makeButtonText())));var e}_makeButtonText(){const e=this.state.date.getFullYear(),t=this.state.date.toLocaleString("default",{month:"2-digit"}),s=this.state.date.toLocaleString("default",{day:"2-digit"}),o=Object(m.d)(this.state.time);return Object(r.t)("Set {dateTime}").replace("{dateTime}",`${e}-${t}-${s} ${o}`)}}function S(e){const[t,s]=e.split(":"),r=new Date;return r.setHours(Number(t),Number(s)),r}var P=s("xT4p");s.d(t,"a",(function(){return M}));const O=new h.a;class M extends o.PureComponent{constructor(){super(...arguments),this._onTextClick=()=>{void 0!==this.props.onClick&&this.props.onClick()},this._onTypeSelect=e=>{const t={type:this.props.durationsMetaInfo[e||0].value},s=Object(m.b)(this.props.durationsMetaInfo,t.type);void 0!==s&&(s.hasDatePicker||s.hasTimePicker)&&(t.datetime=this.props.currentDuration.datetime||Object(m.e)(Object(m.f)())),this.props.onDurationChanged(t),this._close()},this._onTimeSelect=(e,t)=>{const s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),t.getUTCHours(),t.getUTCMinutes());this.props.onDurationChanged({type:this.props.currentDuration.type,datetime:s}),this._close()},this._close=()=>{void 0!==this.props.onClose&&this.props.onClose(),O.fire()}}render(){const e=Object(m.b)(this.props.durationsMetaInfo,this.props.currentDuration.type);if(void 0===e)return null;const t=this.props.currentDuration.datetime?new Date(this.props.currentDuration.datetime):"GTT"===this.props.currentDuration.type||"GTD"===this.props.currentDuration.type?Object(m.f)():new Date,s=Object(m.c)(t,e),i=this.props.durationsMetaInfo.length>1?o.createElement(a.a,{className:P.clickableText,text:e.name,tabIndex:-1,onClick:this._onTextClick,"data-name":"duration-type-selector"}):o.createElement("span",{className:P.clickableText},this.props.durationsMetaInfo[0].name+" "),u=e.hasDatePicker||e.hasTimePicker?o.createElement(a.a,{className:P.clickableText,text:s,tabIndex:-1,onClick:this._onTextClick,"data-name":"duration-datetime-selector"}):void 0,h=this.props.durationsMetaInfo.length>1?this.props.durationsMetaInfo.map((e,t)=>o.createElement(l.b,{label:e.name,key:e.value,onClickArg:t,onClick:this._onTypeSelect})):void 0;return o.createElement("div",{className:P.wrapper},o.createElement("span",null,Object(r.t)("Time in Force")),o.createElement(p.b,{className:P.menuButton,content:i,children:h,drawerBreakpoint:c.a.TabletSmall,isDisabled:0===this.props.durationsMetaInfo.length,arrow:!1,closeOnClickOutside:!0,onClose:this._close}),void 0!==u&&o.createElement(d.a.Provider,{value:O},o.createElement(p.b,{className:P.menuButton,content:u,arrow:!1,closeOnClickOutside:!0,verticalDropDirection:n.d.FromBottomToTop,horizontalDropDirection:n.b.FromRightToLeft,horizontalAttachEdge:n.a.Right,verticalAttachEdge:n.c.Top},o.createElement(y,{durationMetaInfo:e,initDateTime:t,onSelect:this._onTimeSelect}))))}}},bWo7:function(e,t,s){e.exports={panelContainer:"panelContainer-3pDzJA5U",
orderPanel:"orderPanel-3pDzJA5U"}},eGEP:function(e,t,s){e.exports={wrapper:"wrapper-2GJQ29Cb",label:"label-2GJQ29Cb",wait:"wait-2GJQ29Cb",popupMenuItem:"popupMenuItem-2GJQ29Cb",value:"value-2GJQ29Cb"}},gla1:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var r=s("q1tI");const o=()=>{const[,e]=Object(r.useReducer)((e,t)=>e+1,0);return e}},h6kW:function(e,t,s){"use strict";var r=s("q1tI"),o=s.n(r),i=s("nc0P"),n=s("0rc0"),a=s("9dlw"),l=s("DTHj"),c=s("nPPD"),p=s("Iivm"),d=s("j0sD"),u=s("xx2B"),h=s("jjUP"),m=s("/3z9"),b=s("R36R"),v=s("9E2J"),_=s("0oEL"),g=s("sgDj"),f=s("schn");function C(e){const{min:t,max:s,step:i,uiStep:n,reference:a,withInput:l,valueInput:c,onChangeValueInput:C,onClick:w,onClose:k,onFocus:E}=e,[y,S]=Object(r.useState)(!1),[P,O]=Object(r.useState)(void 0),[M,N]=Object(r.useState)(!1),T=o.a.createElement(p.a,{className:f.buttonIcon,icon:v}),D=o.a.createElement(p.a,{className:f.buttonIcon,icon:b}),I=o.a.createElement(p.a,{className:f.buttonIcon,icon:_}),x=o.a.createElement(p.a,{className:f.buttonIcon,icon:g}),B=Object(r.useCallback)(e=>{const r={min:t,max:s,step:i},o=Object(h.c)(r,e,!0),n=M||o.res,a=M?void 0:o.msg;S(n),O(a)},[M,t,s,i]);return Object(r.useEffect)(()=>{B(c)},[B,c]),o.a.createElement("div",{className:f.calculator,tabIndex:-1,ref:a,onFocus:E,onKeyDown:e=>{c&&!y&&13===Object(m.hashFromEvent)(e)&&k()}},l&&o.a.createElement("div",{className:f.calculator__inputBorder},o.a.createElement(u.a,{className:f.calculator__input,inputClassName:f.calculator__innerInput,borderStyle:"none",value:c,min:t,step:i,uiStep:n,mode:"float",error:y,errorMessage:P,errorHandler:function(e){N(e)},onValueChange:C})),o.a.createElement("div",{className:f.calculator__btns},o.a.createElement(d.a,{value:-i,type:d.b.IncDec,icon:T,onClick:w}),o.a.createElement(d.a,{value:i,type:d.b.IncDec,icon:D,onClick:w}),o.a.createElement(d.a,{value:1,type:d.b.PlusValue,onClick:w}),o.a.createElement(d.a,{value:5,type:d.b.PlusValue,onClick:w}),o.a.createElement(d.a,{value:25,type:d.b.PlusValue,onClick:w}),o.a.createElement(d.a,{value:100,type:d.b.PlusValue,onClick:w}),o.a.createElement(d.a,{value:500,type:d.b.PlusValue,onClick:w}),o.a.createElement(d.a,{value:1e3,type:d.b.PlusValue,onClick:w}),o.a.createElement(d.a,{value:0,type:d.b.Clear,icon:I,onClick:w}),o.a.createElement(d.a,{value:t||i,type:d.b.Default,icon:x,onClick:w})))}var w=s("48L3");s.d(t,"a",(function(){return E}));const k=Object(c.a)(l.a,{menuBox:w.menuBox});class E extends r.PureComponent{constructor(e){super(e),this._setCalcRef=e=>{this.props.calcReference&&this.props.calcReference(e)},this._calculatorStepHandler=(e,t)=>{const{min:s,max:r,uiStep:o,trackEventTarget:i,trackEvent:a}=this.props;if(void 0!==a&&void 0!==i&&a(i,"Calculator Button",Object(n.u)(e,t)),t===d.b.Clear||t===d.b.Default)return this._updateValueByCalc(e);const l=this.props.valueGetter();if(null===l)return;let c=l+e;if((c<s||r<c)&&t!==d.b.IncDec)return this._updateValueByCalc(l);if(t===d.b.IncDec){if(c=this._calcByStep(l,e,s,o),r<c)return this._updateValueByCalc(r)
;if(c<s)return this._updateValueByCalc(s)}return this._updateValueByCalc(c)},this._updateValueByCalc=e=>{this._handlerValueInput(e),this.props.onValueChange(e,!0),this.props.calculatorUsedStat&&this.props.calculatorUsedStat()},this.state={valueInput:e.valueGetter()},this._handlerValueInput=this._handlerValueInput.bind(this)}render(){const{min:e,max:t,step:s,uiStep:o,withInput:i,targetEl:n,position:l,onFocus:c,onClose:p}=this.props;return r.createElement(a.a,{isOpened:!0,onClose:p,position:l,doNotCloseOn:n,theme:k},r.createElement(C,{min:e,max:t,step:s,uiStep:o,withInput:i,reference:this._setCalcRef,valueInput:this.state.valueInput,onChangeValueInput:this._updateValueByCalc,onClick:this._calculatorStepHandler,onFocus:c,onClose:p}))}_calcByStep(e,t,s,r){const o=Math.sign(t),n=Math.abs(null!=r?r:t),a=new i.Big(e),l=a.minus(s).mod(t);let c=a.plus(o*n);return l.eq(0)||(c=c.plus((o>0?0:1)*n).minus(l)),Number(c)}_handlerValueInput(e){this.setState({valueInput:e})}}},k2TW:function(e,t,s){e.exports={orderInfo:"orderInfo-JgOQ_pME",title:"title-JgOQ_pME",contentWrapper:"contentWrapper-JgOQ_pME",right:"right-JgOQ_pME"}},nPPD:function(e,t,s){"use strict";function r(e,t,s={}){const r=Object.assign({},t);for(const o of Object.keys(t)){const i=s[o]||o;i in e&&(r[o]=[e[i],t[o]].join(" "))}return r}function o(e,t,s={}){return Object.assign({},e,r(e,t,s))}s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}))},pKbH:function(e,t,s){e.exports={sideControl:"sideControl-1IVPJw8O",section:"section-1IVPJw8O",active:"active-1IVPJw8O",sell:"sell-1IVPJw8O",buy:"buy-1IVPJw8O",wait:"wait-1IVPJw8O",title:"title-1IVPJw8O",typeSide:"typeSide-1IVPJw8O",value:"value-1IVPJw8O",valueNoData:"valueNoData-1IVPJw8O",spread:"spread-1IVPJw8O",isLongValue:"isLongValue-1IVPJw8O",disable:"disable-1IVPJw8O"}},schn:function(e,t,s){e.exports={"css-value-calculator-width":"150px",calculator:"calculator-3AwNSLGC",calculator__inputBorder:"calculator__inputBorder-3AwNSLGC",calculator__input:"calculator__input-3AwNSLGC",calculator__input__innerInput:"calculator__input__innerInput-3AwNSLGC",calculator__btns:"calculator__btns-3AwNSLGC",buttonIcon:"buttonIcon-3AwNSLGC"}},sgDj:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" width="23" height="23"><g fill="none"><path stroke="currentColor" stroke-width="2" d="M4 12.5A7.5 7.5 0 1 0 11.5 5h-6"/><path fill="currentColor" d="M3 5l4-4v8z"/></g></svg>'},tTUf:function(e,t,s){e.exports={absolutePriceControl:"absolutePriceControl-1bHFiJ4K",priceLabel:"priceLabel-1bHFiJ4K",openButton:"openButton-1bHFiJ4K",iconWrapper:"iconWrapper-1bHFiJ4K",openIcon:"openIcon-1bHFiJ4K",wait:"wait-1bHFiJ4K",opened:"opened-1bHFiJ4K",list:"list-1bHFiJ4K",item:"item-1bHFiJ4K",selected:"selected-1bHFiJ4K"}},vqb8:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var r=s("q1tI");const o=e=>{const t="watchedValue"in e?e.watchedValue:void 0,s="defaultValue"in e?e.defaultValue:e.watchedValue.value(),[o,i]=Object(r.useState)(t?t.value():s);return Object(r.useEffect)(()=>{if(t){i(t.value())
;const e=e=>i(e);return t.subscribe(e),()=>t.unsubscribe(e)}return()=>{}},[t]),o}},vwxn:function(e,t,s){e.exports={relativePriceControl:"relativePriceControl-12qDA81C",pipsLabel:"pipsLabel-12qDA81C",openButton:"openButton-12qDA81C",iconWrapper:"iconWrapper-12qDA81C",openIcon:"openIcon-12qDA81C",wait:"wait-12qDA81C",opened:"opened-12qDA81C",list:"list-12qDA81C",item:"item-12qDA81C",selected:"selected-12qDA81C"}},xT4p:function(e,t,s){e.exports={wrapper:"wrapper-39LCEpoT",menuButton:"menuButton-39LCEpoT",clickableText:"clickableText-39LCEpoT"}},zS8N:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="120" height="120" fill="none"><g clip-path="url(#ayusj0oi1)"><path fill="#F0F3FA" fill-rule="evenodd" clip-rule="evenodd" d="M103.54 47.03a4.78 4.78 0 0 0-1.73 4.07c.98 10.62-2.18 22.78-9.61 33.6-14.03 20.43-37.97 28.36-53.47 17.72s-16.7-35.83-2.67-56.26c8.1-11.81 19.52-19.44 30.71-21.73a4.79 4.79 0 0 0 3.4-2.8c.64-1.47 1.43-2.9 2.38-4.28 7.3-10.5 21.14-13.47 30.93-6.62 9.78 6.85 11.8 20.91 4.52 31.42-1.3 1.87-2.8 3.5-4.46 4.88z"/><rect width="80" height="58" fill="#fff" stroke="#1E222D" stroke-width="2" rx="7" x="20" y="26"/><path stroke="#1E222D" stroke-linecap="round" stroke-width="2" d="M6 90h106"/><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M48.53 50.6L52 54.05 53.06 53l-3.47-3.47 3.47-3.47L52 45l-3.47 3.47L45.06 45 44 46.06l3.47 3.47L44 53l1.06 1.06 3.47-3.47zm24 0L76 54.05 77.06 53l-3.47-3.47 3.47-3.47L76 45l-3.47 3.47L69.06 45 68 46.06l3.47 3.47L68 53l1.06 1.06 3.47-3.47z"/><path stroke="#000" stroke-width="1.5" d="M51 64.5h17"/></g></svg>'}}]);