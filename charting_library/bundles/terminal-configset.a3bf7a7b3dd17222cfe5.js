(window.webpackJsonp=window.webpackJsonp||[]).push([["terminal-configset"],{"4qhP":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return d})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return g})),n.d(t,"f",(function(){return _})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return b})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return m}));var i=n("Eyy1"),r=n("7KDR"),o=n("0W4x");n.d(t,"l",(function(){return o.i}));const a="js-bottom-trading-tab";const c=["Paper"];function s(e){return e.findIndex(e=>e.brokerPlan&&!e.brokerPlan.hidden&&e.brokerPlan.flags&&e.brokerPlan.flags.includes("featured"))}function d(e,t){const n=e.map(e=>e.id),i=t.map(e=>e.slug_name),r=t.filter(e=>n.includes(e.slug_name)).map(t=>({metainfo:l(e,t.slug_name),brokerPlan:t})),o=e.filter(e=>!i.includes(e.id)&&!c.includes(e.id)).map(e=>({metainfo:e})),a=s(r),d=c.map(t=>({metainfo:l(e,t)}));return d.length>0&&r.splice(a+1,0,...d),[...r,...o]}function l(e,t){return Object(i.ensureDefined)(e.find(e=>e.id.toLowerCase()===t.toLowerCase()))}function u(e){return void 0!==e&&["oauth","oauth2-implicit-flow","oauth2-code-flow"].includes(e)}function h(e,t){const n=Object(o.m)(e.side)+" "+e.qty+" @ "+t.format(e.price);return n.substr(0,1).toUpperCase()+n.substr(1).toLowerCase()}function p(e){return e?e.map(e=>"-"===e.text||e.separator?new r.Separator:new r.Action({name:e.name,checkable:e.checkable,checked:e.checked,disabled:void 0!==e.enabled&&!e.enabled,shortcut:e.shortcut,label:e.text,statName:e.statName,icon:e.icon,onExecute:t=>{e.action({checkable:t.isCheckable(),checked:t.isChecked(),enabled:!t.isDisabled(),text:t.getLabel().toString()})}})):[]}function g(e){return 6===e||3===e}function _(e,t){if(void 0!==t&&t.length>0){const n=t.find(t=>"default"in t&&(void 0===t.supportedOrderTypes||t.supportedOrderTypes.includes(e)))||t.find(t=>t.supportedOrderTypes&&t.supportedOrderTypes.includes(e));return n?{type:n.value}:void 0}}function w(e){return(e+"-brokers-side-maintenance").toLowerCase()}function b(e){return(e+"-maintenance").toLowerCase()}function f(e,t,n){if("crypto"===e.type)return e.currency||"";return!n&&t.currencySign||t.currency||e.currency||""}function m(e){var t;return"BATS"===(null===(t=e.originalName)||void 0===t?void 0:t.split(":")[0])}},"5bCf":function(e,t,n){e.exports={container:"container-1z0p8Gw0",active:"active-1z0p8Gw0",title:"title-1z0p8Gw0",inactive:"inactive-1z0p8Gw0",titleText:"titleText-1z0p8Gw0",indicator:"indicator-1z0p8Gw0",disconnected:"disconnected-1z0p8Gw0",failed:"failed-1z0p8Gw0",connecting:"connecting-1z0p8Gw0",connected:"connected-1z0p8Gw0",loginTooltip:"loginTooltip-1z0p8Gw0"}},Bf1h:function(e,t,n){"use strict";n.r(t);n("YFKU");const i={paper_trading:{name:"paper_trading",title:window.t("Trading Panel"),buttonOpenTooltip:window.t("Open Trading Panel"),buttonCloseTooltip:window.t("Close Trading Panel"),ctor:null,_gaEvent:"Trading Panel"},scripteditor:{name:"scripteditor",
title:window.t("Pine Editor"),buttonOpenTooltip:window.t("Open Pine Script Editor"),buttonCloseTooltip:window.t("Close Pine Script Editor"),ctor:null,_gaEvent:"Pine Editor"},backtesting:{name:"backtesting",title:window.t("Strategy Tester"),buttonOpenTooltip:window.t("Open Strategy Tester"),buttonCloseTooltip:window.t("Close Strategy Tester"),ctor:null,_gaEvent:"Strategy Tester"},screener:{name:"screener",title:window.t("Screener"),buttonOpenTooltip:window.t("Open Screener"),buttonCloseTooltip:window.t("Close Screener"),ctor:null,_gaEvent:"Screener"},text_notes:{name:"text_notes",title:window.t("Text Notes"),buttonOpenTooltip:window.t("Open Text Notes Panel"),buttonCloseTooltip:window.t("Close Text Notes Panel"),ctor:null,_gaEvent:"Text Notes"}};var r=n("N22A"),o=n("hY0g"),a=n.n(o),c=n("yqjg"),s=n("Eyy1");class d{constructor(e){this._contentRenderer=Promise.resolve(),this._spinnerContainer=document.createElement("div"),this._offlineScreenContainer=document.createElement("div"),this._renderer=Promise.resolve(),this._filter=new a.a(!0),this._bridge=e,Object(r.waitTradingService)().then(e=>{this._trading=e,this.onStatusChange(e.connectStatus()),this._trading.onConnectionStatusChange.subscribe(this,this.onStatusChange)}),n.e("spinner-renderer").then(n.bind(null,"lG9f")).then(e=>{e.render(this._spinnerContainer)}),Object(c.b)(Object(s.ensureDefined)(this._offlineScreenContainer))}activate(){this._contentRenderer.then(()=>{this._content&&this._content.drawAttention&&this._content.drawAttention()})}onStatusChange(e){this._connectStatus!==e&&(this._connectStatus=this._trading.connectStatus(),window.navigator.onLine?(this._contentRenderer=Promise.resolve(),this._content&&this._content.remove(),2===e&&this._renderSpinner(),3!==e&&4!==e?1===e&&this._renderAccountManager(this._trading.activeBroker()):this._renderSpinner()):this._renderOfflineScreen())}_renderSpinner(){this._bridge.container.innerText="",this._content=this._bridge.container.appendChild(this._spinnerContainer)}_renderOfflineScreen(){this._bridge.container.innerText="",this._content=this._bridge.container.appendChild(this._offlineScreenContainer)}_renderAccountManager(e){this._renderer=this._contentRenderer=Promise.all([n.e("react"),n.e(0),n.e(2),n.e(3),n.e(8),n.e(9),n.e(13),n.e(16),n.e(20),n.e(26),n.e(53),n.e(99),n.e(106),n.e(1),n.e(6),n.e(21),n.e("trading-account-manager")]).then(n.bind(null,"eE+s")).then(t=>{this._contentRenderer===this._renderer&&(this._content&&this._content.remove(),this._content=new t.AccountManager(e,this._bridge,1))})}_renderBrokerSelectScreen(){0}}var l=n("q1tI"),u=n("TSYQ"),h=n("Kxc7"),p=n.n(h),g=n("b5Gw"),_=n("4qhP"),w=n("5bCf");const b=window.t("Trading Panel"),f=window.t("Account Manager"),m={4:"failed",2:"connecting",1:"connected",3:"disconnected"},v={4:window.t("Failed"),2:window.t("Connecting"),1:window.t("Connected"),3:window.t("Disconnected")};class C extends l.PureComponent{constructor(e){super(e),this._trading=null,this._tradingServiceCancelable=null,this._titleClick=()=>{const{onClick:e}=this.props;e&&e()},this.state={status:3,
hasActiveBroker:!1,title:p.a.enabled("trading_terminal")?f:b}}componentDidMount(){if(p.a.enabled("trading_terminal"))return;const e=Object(r.tradingService)();null===e?(this._tradingServiceCancelable=Object(g.makeCancelable)(Object(r.waitTradingService)()),this._tradingServiceCancelable.promise.then(this._onTradingService.bind(this))):this._onTradingService(e)}componentWillUnmount(){p.a.enabled("trading_terminal")||(this._cancelWaitingTrading(),null!==this._trading&&(this._trading.onBrokerChange.unsubscribe(this,this._update),this._trading.onConnectionStatusChange.unsubscribe(this,this._update)))}render(){const{status:e,hasActiveBroker:t,title:n}=this.state;return l.createElement("div",{className:u(_.a,w.container,w[m[e]],{[w.active]:this.props.isActive,[w.inactive]:!t}),onClick:this._titleClick,"data-name":this.props.dataName,"data-active":this.props.isActive},l.createElement("span",{className:w.title},l.createElement("span",{className:w.titleText},n)),l.createElement("div",{className:u(w.indicator,"apply-common-tooltip"),title:v[e]}))}_onTradingService(e){this._cancelWaitingTrading(),this._trading=e,e.onBrokerChange.subscribe(this,this._update),e.onConnectionStatusChange.subscribe(this,this._update),this._update()}_update(){const e=this._trading,t=e&&e.activeBroker(),n=e?e.connectStatus():3;window.is_authenticated&&!p.a.enabled("trading_terminal")&&e&&t&&1===n?this.setState({status:n,hasActiveBroker:!0,title:t.accountManagerInfo().accountTitle}):this.setState({status:n,hasActiveBroker:!1,title:b})}_cancelWaitingTrading(){null!==this._tradingServiceCancelable&&(this._tradingServiceCancelable.cancel(),this._tradingServiceCancelable=null)}}var S=n("ogJP");function T(){const e={paper_trading:{ctor:d,customTitleComponent:C}};return Object(S.merge)(Object(S.clone)(i),e)}n.d(t,"getTerminalConfigSet",(function(){return T}))},b5Gw:function(e,t,n){"use strict";n.r(t),n.d(t,"makeCancelable",(function(){return r})),n.d(t,"isCancelled",(function(){return o}));class i{}function r(e){let t=!1;return{promise:new Promise((n,r)=>{e.then(e=>t?r(new i):n(e)),e.catch(e=>r(t?new i:e))}),cancel(){t=!0}}}function o(e){return e instanceof i}},orrl:function(e,t,n){e.exports={wrapper:"wrapper-2i2vljmZ",text:"text-2i2vljmZ"}},yqjg:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var i=n("q1tI"),r=n.n(i),o=n("i8i4"),a=n.n(o),c=n("YFKU"),s=n("orrl");function d(){return r.a.createElement("div",{className:s.wrapper},r.a.createElement("p",{className:s.text},Object(c.t)("Lost internet connection")))}function l(e){a.a.render(r.a.createElement(d,null),e)}}}]);